"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[6946],{91125:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=i(74848),t=i(28453);const r={sidebar_position:1},o="Building with Ruyi Compilation Environment (Using Licheepi 4A as an Example)",s={id:"Package-Manager/cases/case1",title:"Building with Ruyi Compilation Environment (Using Licheepi 4A as an Example)",description:"This guide demonstrates the process of installing the Ruyi package manager, setting up a RISC-V compilation and simulation environment using Ruyi, and completing the local compilation of the CoreMark source code, followed by running it on the Licheepi 4A development board.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/Package-Manager/cases/case1.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case1",permalink:"/docs/en/docs/Package-Manager/cases/case1",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528\u6848\u4f8b",permalink:"/docs/en/docs/category/\u4f7f\u7528\u6848\u4f8b"},next:{title:"Building with Vendor-Provided Binary Toolchain (Using MilkV Duo as an Example)",permalink:"/docs/en/docs/Package-Manager/cases/case2"}},l={},c=[{value:"Environment Description",id:"environment-description",level:2},{value:"Installation of Ruyi Package Manager",id:"installation-of-ruyi-package-manager",level:2},{value:"Setting Up the Development Environment Using Ruyi Package Manager",id:"setting-up-the-development-environment-using-ruyi-package-manager",level:2},{value:"Cross-Compiling CoreMark",id:"cross-compiling-coremark",level:2},{value:"Running and Verification",id:"running-and-verification",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"building-with-ruyi-compilation-environment-using-licheepi-4a-as-an-example",children:"Building with Ruyi Compilation Environment (Using Licheepi 4A as an Example)"}),"\n",(0,a.jsx)(n.p,{children:"This guide demonstrates the process of installing the Ruyi package manager, setting up a RISC-V compilation and simulation environment using Ruyi, and completing the local compilation of the CoreMark source code, followed by running it on the Licheepi 4A development board."}),"\n",(0,a.jsx)(n.h2,{id:"environment-description",children:"Environment Description"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Hardware Environment: Licheepi 4A Development Board (th1520)"}),"\n",(0,a.jsx)(n.li,{children:"Software Environment: Debian/openEuler for RISC-V"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"installation-of-ruyi-package-manager",children:"Installation of Ruyi Package Manager"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Please refer to the ",(0,a.jsx)(n.a,{href:"https://ruyisdk.org/download#%E4%B8%8B%E8%BD%BD-ruyisdk-%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8",children:"RuyiSDK Package Manager Installation Guide"})," to complete the installation of Ruyi."]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"In this document, the hardware environment is a RISC-V device, and the downloaded and installed version of Ruyi is built for the riscv64 architecture."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"setting-up-the-development-environment-using-ruyi-package-manager",children:"Setting Up the Development Environment Using Ruyi Package Manager"}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"View the software repository package index information"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ ruyi list --name-contains gnu-plct --category-is toolchain\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsxs)(n.li,{children:["Install gnu: ruyi install ",(0,a.jsx)(n.code,{children:"<package-name>"})]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Install the compilation toolchain gnu-plct-xthead suitable for Licheepi 4A\n$ ruyi install gnu-plct-xthead \n"})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:"View predefined compilation environments"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ ruyi list profiles\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"5",children:["\n",(0,a.jsxs)(n.li,{children:["Create a Ruyi virtual environment ",(0,a.jsx)(n.code,{children:"venv-sipeed"})," using the specified toolchain and simulator configuration.","\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Note: When creating the virtual environment, ensure the correct compiler version and sysroot type are specified.\nIf no version number is specified, the latest version from the software source is used by default, not the locally installed version."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# You can use the help command to view all available options\n$ ruyi venv -h\n\n# Create the virtual environment venv-sipeed\n$ ruyi venv -t gnu-plct-xthead sipeed-lpi4a venv-sipeed \n\n# View the tools in the compilation environment\n$ ls venv-sipeed/bin/ \n\n# Activate the virtual environment (The virtual environment can be understood as a container designed to isolate the runtime environment. After activation, the gnu-plct-xthead version toolchain is used within the venv-sipeed environment. Alternatively, without creating a virtual environment, you can configure the environment variable directly to use the gcc compiler located at /home/sipeed/.local/share/ruyi/binaries/riscv64/gnu-plct-xthead-2.8.0-ruyi.20240222/bin)\n$ . venv-sipeed/bin/ruyi-activate \n\n# Verify if the gcc in the current virtual environment is usable\n\xabRuyi venv-sipeed\xbb sipeed@lpi4a1590:~$ riscv64-plctxthead-linux-gnu-gcc --version \n"})}),"\n",(0,a.jsxs)(n.ol,{start:"6",children:["\n",(0,a.jsx)(n.li,{children:"Download and extract the CoreMark source code as the compilation target"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create a directory to manage the extracted source code\n$ mkdir coremark && cd coremark\n\n# Extract the source code\n$ ruyi extract coremark\n\n# View the source code\n$ ls -al\n"})}),"\n",(0,a.jsx)(n.h2,{id:"cross-compiling-coremark",children:"Cross-Compiling CoreMark"}),"\n",(0,a.jsxs)(n.ol,{start:"7",children:["\n",(0,a.jsx)(n.li,{children:"Configure the compilation settings in the CoreMark source code (Refer to the CoreMark repository README)"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Modify GCC according to the CoreMark project's build instructions\n$ sed -i 's/\\bgcc\\b/riscv64-plctxthead-linux-gnu-gcc/g' linux64/core_portme.mak\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"8",children:["\n",(0,a.jsx)(n.li,{children:"Perform cross-compilation and build to obtain the executable program coremark.exe"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Run the build\n$ make PORT_DIR=linux64 link\n\n$ ls -al    \n# The executable program coremark.exe is newly generated\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"9",children:["\n",(0,a.jsx)(n.li,{children:"View the file attribute information of the riscv64 executable program."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ file coremark.exe\n# The command output displays architecture-related information about the file\n"})}),"\n",(0,a.jsx)(n.h2,{id:"running-and-verification",children:"Running and Verification"}),"\n",(0,a.jsxs)(n.ol,{start:"10",children:["\n",(0,a.jsx)(n.li,{children:"Directly run the riscv64 CoreMark executable program"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ ./coremark.exe\n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>s});var a=i(96540);const t={},r=a.createContext(t);function o(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);