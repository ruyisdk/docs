"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[9028],{2497:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var l=r(6540),o=r(394),i=r(1984),n=r(9529),s=r(8419),a=r(7668),d=r(4773),c=r(4335),m=r(4586);const u=()=>{const{siteConfig:{customFields:e}}=(0,m.A)();return(0,l.useMemo)((()=>{if(!e.apiURL)return null;return c.A.create({baseURL:`https://${e.apiURL}`,timeout:1e4,headers:{"Content-Type":"application/json"}})}),[e.apiURL])};var h=r(1312),x=r(4848);(new Date).toISOString();const g=()=>(0,x.jsxs)("div",{style:{textAlign:"center",height:"20rem"},children:[(0,x.jsx)(d.A,{style:{fontSize:"2rem",color:"#e3e3e3",marginTop:"1rem"}}),(0,x.jsx)("p",{style:{color:"#e3e3e3"},children:(0,h.T)({id:"\u6682\u65e0\u6570\u636e",message:"\u6682\u65e0\u6570\u636e"})})]}),p=e=>{let{data:t}=e;return(0,x.jsx)(i.A,{style:{width:"100%",borderWidth:"0.5px",borderColor:"grey",flex:"1",height:"100%"},itemLayout:"horizontal",dataSource:Object.entries(t),locale:{emptyText:g()},renderItem:(e,t)=>{let[r,l]=e;return(0,x.jsx)("div",{children:(0,x.jsx)(i.A.Item,{style:{marginLeft:"1rem"},children:(0,x.jsx)(i.A.Item.Meta,{title:(0,x.jsxs)("span",{style:{color:"#d1d1d1",fontSize:"1.5rem"},children:[t+1,".  ",r]}),description:(0,x.jsx)("span",{style:{color:"#0da8fa",marginLeft:"1rem",fontWeight:"bold",fontSize:"1.5rem"},children:l.total})})})})}})},y=()=>{const e=u(),[t,r]=(0,l.useState)(null),[o,i]=(0,l.useState)(null);return(0,l.useEffect)((()=>{if(!e)return;let t=null,l=0;const n=async()=>{if(l>5)console.warn("Stop retry");else try{r((await e.post("/fe/dashboard",{})).data),i(null)}catch(o){console.error("Statistical Data API error, will retry",o),i(o),t=setTimeout(n,2**l*1e3),l++}};if("requestIdleCallback"in window){const e=requestIdleCallback(n);return()=>{cancelIdleCallback(e),clearTimeout(t)}}return t=setTimeout(n,500),()=>clearTimeout(t)}),[e]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{style:{backgroundImage:"url('/img/data_background.jpg')",backgroundPosition:"center",backgroundSize:"cover",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box"},children:(0,x.jsx)(n.Ay,{renderEmpty:g,children:(0,x.jsxs)(s.A,{style:{width:"90%",height:"90%",backgroundColor:"rgba(0,0,0,0)",border:"none"},children:[(0,x.jsx)("h1",{style:{color:"#e3e3e3",marginTop:"4rem"},children:(0,h.T)({id:"RuyiSDK \u6570\u636e\u603b\u89c8",message:"RuyiSDK \u6570\u636e\u603b\u89c8"})}),(0,x.jsx)(a.A,{title:(0,x.jsx)("span",{style:{color:"#e3e3e3",fontSize:"2rem",fontWeight:"bold"},children:(0,h.T)({id:"\u4e0b\u8f7d\u6570\u91cf Downloads",message:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf"})}),value:t?.downloads?.total||(0,h.T)({id:"\u8f7d\u5165\u4e2d",message:"\u8f7d\u5165\u4e2d"})+"...",valueStyle:{color:"#e3e3e3",fontSize:null!=t?.downloads?.total?"3rem":"1.5rem"},style:{marginTop:"4rem"}}),(0,x.jsx)(a.A,{title:(0,x.jsx)("span",{style:{color:"#e3e3e3",fontSize:"2rem",fontWeight:"bold"},children:(0,h.T)({id:"\u5b89\u88c5\u53f0\u6570 Installs",message:"\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u53f0\u6570"})}),value:t?.installs?.total||(0,h.T)({id:"\u8f7d\u5165\u4e2d",message:"\u8f7d\u5165\u4e2d"})+"...",headStyle:{color:"#e3e3e3"},valueStyle:{color:"#e3e3e3",fontSize:null!=t?.downloads?.total?"3rem":"1.5rem"}}),(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"4rem",height:"auto",flexWrap:"wrap",width:"100%",maxWidth:"100vw",boxSizing:"border-box",gap:"4rem",alignItems:"stretch"},children:[(0,x.jsx)(s.A,{title:(0,x.jsx)("span",{style:{color:"#e3e3e3",fontSize:"1.5rem",fontWeight:"bold"},children:(0,h.T)({id:"\u6700\u5e38\u7528\u6307\u4ee4 Top Commands",message:"\u6700\u5e38\u7528\u6307\u4ee4"})}),style:{flex:"0 0 24rem",width:"24rem",minWidth:"19rem",maxWidth:"70%",backgroundColor:"rgba(0,0,0,0)",border:"none",height:"auto",display:"flex",flexDirection:"column"},headStyle:{borderBottom:"none",fontSize:"1rem",color:"#e3e3e3",padding:"0"},bodyStyle:{padding:"16px 0",flex:"1",display:"flex",flexDirection:"column"},children:(0,x.jsx)("div",{className:"custom-scroll",style:{borderRadius:"0.4rem",backgroundColor:"rgba(0, 0, 0, 0.5)",flex:"1"},children:(0,x.jsx)(p,{data:t?.top_commands||{}})})}),(0,x.jsx)(s.A,{title:(0,x.jsx)("span",{style:{color:"#e3e3e3",fontSize:"1.5rem",fontWeight:"bold"},children:(0,h.T)({id:"\u6700\u5e38\u7528\u5305 Top Packages",message:"\u6700\u5e38\u7528\u5305"})}),style:{flex:"0 0 24rem",width:"24rem",minWidth:"19rem",maxWidth:"70%",backgroundColor:"rgba(0,0,0,0)",border:"none",height:"auto",display:"flex",flexDirection:"column"},headStyle:{borderBottom:"none",fontSize:"1rem",color:"#e3e3e3",padding:"0"},bodyStyle:{padding:"16px 0",flex:"1",display:"flex",flexDirection:"column"},children:(0,x.jsx)("div",{className:"custom-scroll",style:{borderRadius:"0.4rem",backgroundColor:"rgba(0, 0, 0, 0.5)",flex:"1"},children:(0,x.jsx)(p,{data:t?.top_packages||{}})})})]}),t&&(0,x.jsxs)("p",{style:{marginTop:"4rem",color:"#d1d1d1",fontSize:"0.8rem"},children:[(0,h.T)({id:"\u6700\u540e\u66f4\u65b0\u65f6\u95f4",message:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4"}),": ",String(t.last_updated).slice(0,16).replace("T"," ")]})]})})})})},f=()=>(0,x.jsx)(o.A,{title:"Data Panel",description:"RuyiSDK Data Panel",children:(0,x.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:"20px"},children:(0,x.jsx)(y,{})})})}}]);