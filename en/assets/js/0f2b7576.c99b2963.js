"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[4714],{78478:(e,t,n)=>{n.d(t,{A:()=>s});n(96540);var o=n(92303),r=n(74848);function s(e){let{children:t,fallback:n}=e;return(0,o.A)()?(0,r.jsx)(r.Fragment,{children:t?.()}):n??null}},60854:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(96540),r=n(26348),s=n(19337),i=n(30222),a=n(45773),l=n(35404),c=n(96813),d=n(74848);const u=e=>{let{textToCopy:t,themeStyles:n}=e;const[r,s]=(0,o.useState)(!1),[i,c]=(0,o.useState)(!1),u={...n.copyButton,backgroundColor:i?n.copyButtonHoverBg:"transparent",color:i?n.copyButtonHoverColor:n.copyButton.color};return(0,d.jsx)("button",{onClick:()=>{t&&navigator.clipboard.writeText(t).then((()=>{s(!0),setTimeout((()=>s(!1)),2e3)})).catch((e=>{console.error("Failed to copy text: ",e);try{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),s(!0),setTimeout((()=>s(!1)),2e3)}catch(n){console.error("Fallback copy method failed: ",n)}}))},style:u,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),"aria-label":"Copy code",children:r?(0,d.jsx)(a.A,{size:16,style:{color:"#4ade80"}}):(0,d.jsx)(l.A,{size:16})})},h=e=>{let{code:t="",lang:n="no",filename:a,showTitleCopyButton:l="bash"!==n}=e;const[h,m]=(0,o.useState)("dark");(0,o.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>document.documentElement.getAttribute("data-theme")||"dark";m(e());const t=new MutationObserver((()=>m(e())));return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>t.disconnect()}),[]);const p={container:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb"},header:{backgroundColor:"#f3f4f6",borderBottom:"1px solid #e5e7eb"},filename:{color:"#1f2937"},icon:{color:"#4b5563"},copyButton:{color:"#4b5563",transition:"background-color 150ms ease-in-out",border:"none",cursor:"pointer",padding:"0.375rem",borderRadius:"0.375rem"},copyButtonHoverBg:"#e5e7eb",copyButtonHoverColor:"#1f2937",bashLineHoverBg:"rgba(229, 231, 235, 0.6)",syntaxTheme:s.A},y={container:{backgroundColor:"#1e1e1e",border:"1px solid #333333"},header:{backgroundColor:"#252526",borderBottom:"1px solid #333333"},filename:{color:"#cccccc"},icon:{color:"#cccccc"},copyButton:{color:"#cccccc",transition:"background-color 150ms ease-in-out",border:"none",cursor:"pointer",padding:"0.375rem",borderRadius:"0.375rem"},copyButtonHoverBg:"#3c3c3c",copyButtonHoverColor:"#ffffff",bashLineHoverBg:"rgba(55, 65, 81, 0.4)",syntaxTheme:i.A},x="dark"===h?y:p,f=x.syntaxTheme,b={container:{borderRadius:"0.5rem",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',margin:"1.5rem 0",overflow:"hidden"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem 1rem"},headerTextContainer:{display:"flex",alignItems:"center",gap:"0.5rem"},filename:{fontSize:"0.875rem"},syntaxHighlighter:{margin:0,padding:"1rem",fontSize:"0.9rem",lineHeight:"1.6"},bashLine:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem"}},g=(0,o.useMemo)((()=>{if("string"!=typeof t)return"";const e=t.replace(/\r\n/g,"\n").split("\n");return e.length>0&&""===e[0].trim()&&e.shift(),e.join("\n")}),[t]);if("bash"===n){const e=/^\s*(?:\xab[^\xbb]+\xbb\s*)?(\$)\s+/,t=t=>t.split("\n").filter((t=>e.test(t))).map((t=>{const n=t.match(e),o=t.indexOf(n[1]);return t.substring(o+1).trim()})).join("\n"),n=t=>{let{line:n}=t;const[s,i]=(0,o.useState)(!1),a=n.match(e),l=!!a;let c="";if(l){const e=n.indexOf(a[1]);c=n.substring(e+1).trim()}const h={...b.bashLine,backgroundColor:s?x.bashLineHoverBg:"transparent",minWidth:"max-content",width:"100%",position:"relative",paddingRight:"2rem"};return(0,d.jsxs)("div",{style:h,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,d.jsx)(r.A,{language:"bash",style:f,customStyle:{padding:0,margin:0,border:"none",borderRadius:0,background:"transparent",overflow:"visible",width:"auto",fontFamily:"inherit",fontSize:"0.9rem",lineHeight:"1.6"},children:n}),l&&(0,d.jsx)("div",{style:{position:"sticky",right:"1rem",display:"flex",alignItems:"center",height:"100%",opacity:s?1:0,transition:"opacity 150ms ease-in-out"},children:(0,d.jsx)(u,{textToCopy:c,themeStyles:x})})]})},s=f['pre[class*="language-"]']&&f['pre[class*="language-"]'].background||x.container.backgroundColor;return(0,d.jsxs)("div",{style:{...b.container,...x.container},children:[(0,d.jsxs)("div",{style:{...b.header,...x.header},children:[(0,d.jsxs)("div",{style:b.headerTextContainer,children:[(0,d.jsx)(c.A,{size:16,style:x.icon}),(0,d.jsx)("span",{style:{...b.filename,...x.filename},children:a||"bash"})]}),l&&(0,d.jsx)(u,{textToCopy:t(g),themeStyles:x})]}),(0,d.jsx)("div",{style:{backgroundColor:s,overflowX:"auto",padding:"1rem 0",width:"100%"},children:(0,d.jsx)("div",{style:{display:"table",width:"max-content",minWidth:"100%"},children:g.split("\n").map(((e,t)=>(0,d.jsx)(n,{line:e},t)))})})]})}return(0,d.jsxs)("div",{style:{...b.container,...x.container},children:[(0,d.jsxs)("div",{style:{...b.header,...x.header},children:[(0,d.jsx)("span",{style:{...b.filename,...x.filename},children:a||n}),l&&(0,d.jsx)(u,{textToCopy:g,themeStyles:x})]}),(0,d.jsx)(r.A,{language:"no"===n?"text":n,style:f,customStyle:b.syntaxHighlighter,wrapLines:!0,wrapLongLines:!0,children:g})]})}},66592:(e,t,n)=>{n.d(t,{Ay:()=>u,Ez:()=>c,Ho:()=>x,Lz:()=>d,Mq:()=>m,Pd:()=>h,XG:()=>l,db:()=>y,o3:()=>p});var o=n(96540),r=n(60854),s=n(78478),i=n(74848);const a=(0,o.createContext)(null);function l(e){if(!e)return null;try{const t=e.split("/"),n=t[t.length-1];return n.split("?")[0]}catch(t){return console.error("\u63d0\u53d6\u6587\u4ef6\u540d\u5931\u8d25:",t),null}}function c(e){const t=l(e);return t?`chmod +x ./${t}`:"chmod +x ./ruyi"}function d(){["https://github.com/ruyisdk/ruyi/releases/download/v2.0.0/ruyi-v2.0.0-linux-amd64","https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/v2.0.0/ruyi-v2.0.0-linux-aarch64","https://example.com/download/ruyi-v1.5.0-linux-riscv64?token=abc123",null,""].forEach(((e,t)=>{const n=l(e),o=c(e);console.log(`Test ${t+1}:`,{url:e,fileName:n,chmodCommand:o})}))}function u(e){let{children:t}=e;const[n,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{fetch("https://api.ruyisdk.cn/releases/latest-pm").then((e=>e.json())).then((e=>r(e))).catch((e=>console.error("API releases/latest-pm \u83b7\u53d6\u7248\u672c\u4fe1\u606f\u5931\u8d25",e)))}),[]),(0,i.jsx)(a.Provider,{value:n,children:t})}function h(){return(0,o.useContext)(a)}function m(e){let{arch:t}=e;const n=h();if(!n)return(0,i.jsx)(s.A,{fallback:(0,i.jsx)("pre",{children:(0,i.jsx)("code",{children:"$ wget "})}),children:()=>(0,i.jsx)(r.A,{lang:"bash",code:"$ wget"})});const o=n.channels.stable.download_urls[`linux/${t}`]?.[1];return(0,i.jsx)(s.A,{fallback:(0,i.jsx)("pre",{children:(0,i.jsx)("code",{children:`$ wget ${o||""}`})}),children:()=>(0,i.jsx)(r.A,{lang:"bash",code:`$ wget ${o}`})})}function p(e){let{arch:t}=e;const n=h();if(!n)return(0,i.jsx)("code",{children:"ruyi"});const o=n.channels.stable.download_urls[`linux/${t}`]?.[1],r=l(o);return(0,i.jsx)("code",{children:r||"ruyi"})}function y(e){let{arch:t}=e;const n=h();if(!n)return(0,i.jsx)(r.A,{lang:"bash",code:"$ chmod +x ./ruyi"});const o=n.channels.stable.download_urls[`linux/${t}`]?.[1],s=l(o);return(0,i.jsx)(r.A,{lang:"bash",code:`$ chmod +x ./${s||"ruyi"}`})}function x(e){let{arch:t}=e;const n=h();if(!n)return(0,i.jsx)(r.A,{lang:"bash",code:"$ sudo cp -v ./ruyi /usr/local/bin/ruyi"});const o=n.channels.stable.download_urls[`linux/${t}`]?.[1],s=l(o);return(0,i.jsx)(r.A,{lang:"bash",code:`$ sudo cp -v ./${s||"ruyi"} /usr/local/bin/ruyi`})}},18139:(e,t,n)=>{n.r(t),n.d(t,{ChmodCommand:()=>o.db,CpCommand:()=>o.Ho,DownloadRuyi:()=>o.Mq,FileName:()=>o.o3,default:()=>r,extractFileName:()=>o.XG,generateChmodCommand:()=>o.Ez,testFileNameExtraction:()=>o.Lz,useReleaseData:()=>o.Pd});var o=n(66592);const r=o.Ay}}]);