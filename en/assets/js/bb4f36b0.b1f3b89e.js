"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[3324],{32766:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var i=t(74848),r=t(28453),o=t(84664);const s={sidebar_position:4},l="Using Integration Features",a={id:"Package-Manager/intergration",title:"Using Integration Features",description:"In addition to its fundamental package management capabilities as a package manager, the Ruyi package manager also provides integrations for toolchains, simulators, images, and other software packages.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/Package-Manager/intergration.mdx",sourceDirName:"Package-Manager",slug:"/Package-Manager/intergration",permalink:"/docs/en/docs/Package-Manager/intergration",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Managing Ruyi Packages",permalink:"/docs/en/docs/Package-Manager/packages"},next:{title:"\u4f7f\u7528\u6848\u4f8b",permalink:"/docs/en/docs/category/\u4f7f\u7528\u6848\u4f8b"}},c={},d=[{value:"Ruyi Virtual Environment",id:"ruyi-virtual-environment",level:2},{value:"Virtual Environment Configuration",id:"virtual-environment-configuration",level:3},{value:"Toolchain and Pre-configured Profile Combinations",id:"toolchain-and-pre-configured-profile-combinations",level:3},{value:"Creating a Virtual Environment",id:"creating-a-virtual-environment",level:3},{value:"Virtual Environment Integration",id:"virtual-environment-integration",level:3},{value:"Ruyi Image Integration",id:"ruyi-image-integration",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"using-integration-features",children:"Using Integration Features"}),"\n",(0,i.jsx)(n.p,{children:"In addition to its fundamental package management capabilities as a package manager, the Ruyi package manager also provides integrations for toolchains, simulators, images, and other software packages."}),"\n",(0,i.jsx)(n.p,{children:"You can:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Obtain commonly used source code packages provided by RuyiSDK"}),"\n",(0,i.jsx)(n.li,{children:"Conveniently combine toolchains and simulators to establish a Ruyi virtual environment targeting a specific RISC-V CPU platform without needing to understand excessive details"}),"\n",(0,i.jsx)(n.li,{children:"Create isolated environments within the system to ensure environment separation for different versions of compilation toolchains and library files, thereby maintaining development efficiency"}),"\n",(0,i.jsx)(n.li,{children:"Flash system images for a specific model and configuration of a RISC-V SOC development board"}),"\n",(0,i.jsx)(n.li,{children:"Find well-supported real-time operating systems for a specific RISC-V microcontroller"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ruyi-virtual-environment",children:"Ruyi Virtual Environment"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"venv"})," command of the Ruyi package manager tool is used to combine toolchains and simulators to establish a virtual environment. The compilation environment provides configurations required for different development boards, automatically passing the necessary parameters for compilation."]}),"\n",(0,i.jsx)(n.h3,{id:"virtual-environment-configuration",children:"Virtual Environment Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["The Ruyi software repository already provides some pre-configured profiles that do not require installation. These profiles can be listed using the ",(0,i.jsx)(n.code,{children:"ruyi list profiles"})," command:"]}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ruyi list profiles\ngeneric\nbaremetal-rv64ilp32 (needs flavor(s): {'rv64ilp32'})\nxiangshan-nanhu\nsipeed-lpi4a (needs flavor(s): {'xthead'})\nmilkv-duo\n"}),"\n",(0,i.jsxs)(n.p,{children:["Some configurations require Ruyi toolchain packages that support specific flavor(s). You can check whether a toolchain package supports this feature in ",(0,i.jsx)(n.code,{children:"ruyi list --verbose"}),'. Alternatively, refer directly to the table in the "Toolchain and Pre-configured Profile Combinations" section.']}),"\n",(0,i.jsx)(n.h3,{id:"toolchain-and-pre-configured-profile-combinations",children:"Toolchain and Pre-configured Profile Combinations"}),"\n",(0,i.jsx)(n.p,{children:"The Ruyi package manager checks for conflicts in the environment before establishing a virtual environment, but it does not guarantee that a successfully established environment will be usable. Flexible use of this feature requires some understanding of these toolchains. In general, you can refer directly to the table below."}),"\n",(0,i.jsx)(n.p,{children:"Here is a list of tested and confirmed usable configuration combinations:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Toolchain(toolchain)"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Sysroot"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Pre-configured Profile(profile)"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Build Target"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-plct"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Built-in"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"generic"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Linux OS for riscv64 architecture"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-plct"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Built-in"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"milkv-duo"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"MilkV Duo series development board image using glibc"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-plct"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Built-in"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"xiangshan-nanhu"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Xiangshan Nanhu"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-upstream"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Built-in"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"generic"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Linux OS for riscv64 architecture"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-plct-xthead"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Built-in"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"sipeed-lpi4a"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Thead C910"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-plct-rv64ilp32-elf"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"None"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"baremetal-rv64ilp32"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"rv64ilp32 bare metal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"llvm-plct"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-plct"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"generic"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Linux OS for riscv64 architecture"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"llvm-upstream"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-upstream"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"generic"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Linux OS for riscv64 architecture"})]})]})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Vendor-released Binary Toolchain(toolchain)"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Sysroot"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Pre-configured Profile(profile)"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Build Target"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-milkv-milkv-duo-elf-bin"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"None"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"generic"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Milkv Duo series development board bare metal (requires additional parameters)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-milkv-milkv-duo-bin"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Built-in"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"generic"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Milkv Duo series development board image using glibc (requires additional parameters)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"gnu-milkv-milkv-duo-musl-bin"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Built-in"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"generic"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Milkv Duo series development board image using musl (requires additional parameters)"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["For more information about compilation toolchains, please refer to ",(0,i.jsx)(n.a,{href:"../Other/GNU-type",children:"RuyiSDK Compilation Tools"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-virtual-environment",children:"Creating a Virtual Environment"}),"\n",(0,i.jsxs)(n.p,{children:["The specific method for using the ",(0,i.jsx)(n.code,{children:"venv"})," command can be obtained using the ",(0,i.jsx)(n.code,{children:"-h"})," parameter:"]}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ruyi venv -h\n"}),"\n",(0,i.jsx)(n.p,{children:"Here are some examples:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:'\n# \u4f7f\u7528 GNU \u4e0a\u6e38\u5de5\u5177\u94fe\u914d\u7f6e RISC-V \u865a\u62df\u73af\u5883\uff1a\n$ ruyi venv -t gnu-upstream generic ./generic-venv\n\n# Configure a RISC-V virtual environment using the GNU upstream toolchain:\n$ ruyi venv -t gnu-plct milkv-duo ./milkv-venv\n\n# Configure a Milkv-Duo virtual environment using the PLCT toolchain:\n$ ruyi venv -t gnu-plct xiangshan-nanhu ./nanhu-venv\n\n# LLVM usually requires the sysroot from GCC:\n$ ruyi venv -t llvm-upstream --sysroot-from gnu-plct generic ./llvm-venv\n\n# Configure a Lichee Pi 4A virtual environment using a specified version of the T-Head toolchain:\n$ ruyi venv -t "gnu-plct-xthead(==0.20231212.0)" sipeed-lpi4a ./sipeed-venv\n\n# Run cross-compiled RISC-V binaries using the upstream QEMU simulator\n$ ruyi venv -t gnu-plct generic -e qemu-user-riscv-upstream ./qemu-venv\n\n# Run cross-compiled RISC-V binaries using the T-Head QEMU simulator\n$ ruyi venv -t gnu-plct-xthead sipeed-lpi4a -e qemu-user-riscv-xthead ./xthead-qemu-venv\n\n# Multi-toolchain example, where gnu-upstream provides the sysroot\n$ ruyi venv -t llvm-upstream -t gnu-upstream generic ./upstream-venv\n'}),"\n",(0,i.jsx)(n.p,{children:"The virtual environment is used to integrate toolchains, simulators, and other tools. Before creating a compilation environment, ensure that the corresponding Ruyi software packages are installed."}),"\n",(0,i.jsx)(n.h3,{id:"virtual-environment-integration",children:"Virtual Environment Integration"}),"\n",(0,i.jsxs)(n.p,{children:["The following example uses gnu-upstream to describe virtual environment integration in detail. Please modify environment-related information such as paths and ",(0,i.jsx)(n.code,{children:"PS1"})," based on actual understanding."]}),"\n",(0,i.jsx)(n.p,{children:"First, install the software packages required for this example:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ruyi install gnu-upstream qemu-user-riscv-upstream\n"}),"\n",(0,i.jsx)(n.p,{children:"Create a clean directory to run the example:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ mkdir hello-ruyi\n$ cd hello-ruyi\n"}),"\n",(0,i.jsx)(n.p,{children:"Obtain the ruyisdk-demo source code:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ruyi extract ruyisdk-demo\n$ ls\nREADME.md  rvv-autovec\n"}),"\n",(0,i.jsx)(n.p,{children:"Establish a virtual environment:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ruyi venv -t gnu-upstream -e qemu-user-riscv-upstream generic ./myhone-venv\ninfo: Creating a Ruyi virtual environment at myhone-venv...\ninfo: The virtual environment is now created.\n\nYou may activate it by sourcing the appropriate activation script in the\nbin directory, and deactivate by invoking 'ruyi-deactivate'.\n\nA fresh sysroot/prefix is also provisioned in the virtual environment.\nIt is available at the following path:\n\n    /home/myhone/hello-ruyi/myhone-venv/sysroot\n\nThe virtual environment also comes with ready-made CMake toolchain file\nand Meson cross file. Check the virtual environment root for those;\ncomments in the files contain usage instructions.\n"}),"\n",(0,i.jsxs)(n.p,{children:["This virtual environment integrates the gnu-upstream toolchain and qemu-user-riscv-upstream simulator, using the generic configuration targeting the riscv64 Linux operating system. The compilation environment is established in the ",(0,i.jsx)(n.code,{children:"./myhome-venv"})," directory (absolute paths can also be used). The command output provides the method to activate the compilation environment, the command to exit the compilation environment, the absolute path of the sysroot directory, and some other information."]}),"\n",(0,i.jsx)(n.p,{children:"In the virtual environment directory, you can see files related to the compilation environment:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ls ./myhone-venv/\nbin                                        ruyi-venv.toml\nbinfmt.conf                                sysroot\nmeson-cross.ini                            sysroot.riscv64-unknown-linux-gnu\nmeson-cross.riscv64-unknown-linux-gnu.ini  toolchain.cmake\nruyi-cache.v1.toml                         toolchain.riscv64-unknown-linux-gnu.cmake\n"}),"\n",(0,i.jsxs)(n.p,{children:["Among them, ",(0,i.jsx)(n.code,{children:"binfmt.conf"})," is an example configuration that can be used for systemd-binfmt, ",(0,i.jsx)(n.code,{children:"toolchain.cmake"})," and ",(0,i.jsx)(n.code,{children:"meson-cross.ini"})," can be used for cross-compilation of projects, ",(0,i.jsx)(n.code,{children:"sysroot"})," is the sysroot used by this virtual environment, and the ",(0,i.jsx)(n.code,{children:"bin"})," directory contains commands and scripts available in this compilation environment."]}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.code,{children:"bin"})," directory, you can view the available toolchain binaries:"]}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ls ./myhone-venv/bin/\nriscv64-unknown-linux-gnu-addr2line  riscv64-unknown-linux-gnu-gcc-ranlib     riscv64-unknown-linux-gnu-nm\nriscv64-unknown-linux-gnu-ar         riscv64-unknown-linux-gnu-gcov           riscv64-unknown-linux-gnu-objcopy\nriscv64-unknown-linux-gnu-as         riscv64-unknown-linux-gnu-gcov-dump      riscv64-unknown-linux-gnu-objdump\nriscv64-unknown-linux-gnu-c++        riscv64-unknown-linux-gnu-gcov-tool      riscv64-unknown-linux-gnu-ranlib\nriscv64-unknown-linux-gnu-cc         riscv64-unknown-linux-gnu-gdb            riscv64-unknown-linux-gnu-readelf\nriscv64-unknown-linux-gnu-c++filt    riscv64-unknown-linux-gnu-gdb-add-index  riscv64-unknown-linux-gnu-size\nriscv64-unknown-linux-gnu-cpp        riscv64-unknown-linux-gnu-gfortran       riscv64-unknown-linux-gnu-strings\nriscv64-unknown-linux-gnu-elfedit    riscv64-unknown-linux-gnu-gprof          riscv64-unknown-linux-gnu-strip\nriscv64-unknown-linux-gnu-g++        riscv64-unknown-linux-gnu-ld             ruyi-activate\nriscv64-unknown-linux-gnu-gcc        riscv64-unknown-linux-gnu-ld.bfd         ruyi-qemu\nriscv64-unknown-linux-gnu-gcc-ar     riscv64-unknown-linux-gnu-ldd\nriscv64-unknown-linux-gnu-gcc-nm     riscv64-unknown-linux-gnu-lto-dump\n"}),"\n",(0,i.jsxs)(n.p,{children:["This includes all toolchain commands, the QEMU user-mode simulator renamed as ",(0,i.jsx)(n.code,{children:"ruyi-qemu"}),", and the ",(0,i.jsx)(n.code,{children:"ruyi-activate"})," script used to enter the virtual environment. The toolchain commands are actually soft links to ruyi."]}),"\n",(0,i.jsxs)(n.p,{children:["Source the ",(0,i.jsx)(n.code,{children:"ruyi-activate"})," script to activate the build environment, and ",(0,i.jsx)(n.code,{children:"PS1"})," will be modified:"]}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ source ./myhone-venv/bin/ruyi-activate\n\xabRuyi myhone-venv\xbb $\n"}),"\n",(0,i.jsxs)(n.p,{children:["At the same time, ",(0,i.jsx)(n.code,{children:"PATH"})," is also modified, and you can now directly call the toolchain:"]}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n\xabRuyi myhone-venv\xbb $ whereis riscv64-unknown-linux-gnu-gcc\nriscv64-unknown-linux-gnu-gcc: /home/myhone/hello-ruyi/myhone-venv/bin/riscv64-unknown-linux-gnu-gcc\n\xabRuyi myhone-venv\xbb $ riscv64-unknown-linux-gnu-gcc --version\nriscv64-unknown-linux-gnu-gcc (RuyiSDK 20231212 Upstream-Sources) 13.2.0\nCopyright (C) 2023 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n"}),"\n",(0,i.jsx)(n.p,{children:'In the Ruyi virtual environment, apart from automatically passing the configured architecture options to the toolchain, there is not much difference in the use of toolchains and simulators. For more content, please refer to the "Use Cases" chapter.'}),"\n",(0,i.jsx)(n.p,{children:"Build ruyisdk-demo:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ cd rvv-autovec\n$ make\n"}),"\n",(0,i.jsx)(n.p,{children:"After completing the use of the virtual environment, exit the compilation environment, and everything will be restored to the state before entering:"}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n\xabRuyi myhone-venv\xbb $ ruyi-deactivate\n$\n"}),"\n",(0,i.jsx)(n.h2,{id:"ruyi-image-integration",children:"Ruyi Image Integration"}),"\n",(0,i.jsxs)(n.p,{children:["Ruyi's image integration provides development board image flashing and microcontroller device documentation. This feature is linked with the RuyiSDK ",(0,i.jsx)(n.a,{href:"https://github.com/ruyisdk/support-matrix/",children:"RISC-V Development Board and OS Support Matrix"})," project."]}),"\n",(0,i.jsxs)(n.p,{children:["This feature provides a wizard that supports using ",(0,i.jsx)(n.code,{children:"dd"})," and ",(0,i.jsx)(n.code,{children:"fastboot"})," to flash system images for RISC-V devices. It also provides guidance documentation for RISC-V microcontrollers and other devices that cannot be flashed conventionally."]}),"\n",(0,i.jsx)(o.Ay,{lang:"bash",showTitleCopyButton:"true",code:"\n$ ruyi device provision\n"}),"\n",(0,i.jsx)(n.p,{children:'For more detailed examples, please refer to the "Use Cases" chapter.'})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},84664:(e,n,t)=>{t.d(n,{Ay:()=>g});var i=t(96540),r=t(26348),o=t(74848);const s=()=>(0,o.jsx)("svg",{height:"16",strokeLinejoin:"round",viewBox:"0 0 16 16",width:"16",style:{color:"currentcolor"},children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.75 0.5C1.7835 0.5 1 1.2835 1 2.25V9.75C1 10.7165 1.7835 11.5 2.75 11.5H3.75H4.5V10H3.75H2.75C2.61193 10 2.5 9.88807 2.5 9.75V2.25C2.5 2.11193 2.61193 2 2.75 2H8.25C8.38807 2 8.5 2.11193 8.5 2.25V3H10V2.25C10 1.2835 9.2165 0.5 8.25 0.5H2.75ZM7.75 4.5C6.7835 4.5 6 5.2835 6 6.25V13.75C6 14.7165 6.7835 15.5 7.75 15.5H13.25C14.2165 15.5 15 14.7165 15 13.75V6.25C15 5.2835 14.2165 4.5 13.25 4.5H7.75ZM7.5 6.25C7.5 6.11193 7.61193 6 7.75 6H13.25C13.3881 6 13.5 6.11193 13.5 6.25V13.75C13.5 13.8881 13.3881 14 13.25 14H7.75C7.61193 14 7.5 13.8881 7.5 13.75V6.25Z",fill:"currentColor"})}),l=()=>(0,o.jsx)("svg",{height:"16",strokeLinejoin:"round",viewBox:"0 0 16 16",width:"16",style:{color:"currentcolor"},children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5607 3.99999L15.0303 4.53032L6.23744 13.3232C5.55403 14.0066 4.44599 14.0066 3.76257 13.3232L4.2929 12.7929L3.76257 13.3232L0.969676 10.5303L0.439346 9.99999L1.50001 8.93933L2.03034 9.46966L4.82323 12.2626C4.92086 12.3602 5.07915 12.3602 5.17678 12.2626L13.9697 3.46966L14.5 2.93933L15.5607 3.99999Z",fill:"currentColor"})}),a=()=>(0,o.jsx)("span",{className:"text-[13px] font-mono text-neutral-600 dark:text-neutral-400",children:">_"}),c=e=>{let{textToCopy:n}=e;const[t,r]=(0,i.useState)(!1);return(0,o.jsx)("button",{onClick:async()=>{if(n)try{await navigator.clipboard.writeText(n),r(!0),setTimeout((()=>r(!1)),2e3)}catch(e){console.error("Copy failed:",e)}},className:"flex items-center justify-center p-2 rounded-md border-0 cursor-pointer  transition-all duration-200  text-neutral-500 hover:text-neutral-900 hover:bg-neutral-200  dark:text-neutral-400 dark:hover:text-white dark:hover:bg-neutral-700  focus-visible:outline-2 focus-visible:outline-blue-500 focus-visible:outline-offset-2","aria-label":"Copy code",title:t?"Copied!":"Copy code",children:t?(0,o.jsx)("span",{className:"text-green-500 dark:text-green-400",children:(0,o.jsx)(l,{})}):(0,o.jsx)(s,{})})},d=e=>{let{langs:n,currentLang:t,onLangChange:i}=e;return n&&0!==n.length?(0,o.jsx)("div",{className:"flex items-center gap-1",children:n.map(((e,n)=>{const r=e.lang===t;return(0,o.jsx)("button",{onClick:()=>i(e.lang),className:`\n                            px-2 py-1 text-xs font-medium rounded transition-all duration-200\n                            ${r?"bg-neutral-200 text-neutral-900 dark:bg-neutral-700 dark:text-neutral-100":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-400 dark:hover:text-neutral-100 dark:hover:bg-neutral-800"}\n                        `,"aria-label":`Switch to ${e.lang}`,children:e.lang},e.lang||n)}))}):null},u=e=>{let{title:n,code:t,isHovered:i,copiable:r=!0,langs:s=[],currentLang:l,onLangChange:u}=e;return(0,o.jsxs)("div",{className:"flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:["Terminal"===n&&(0,o.jsx)(a,{}),(0,o.jsx)("span",{className:"text-[13px] font-normal tracking-normal  text-neutral-600 dark:text-neutral-400 font-sans",children:n})]}),(0,o.jsx)(d,{langs:s,currentLang:l,onLangChange:u})]}),r&&(0,o.jsx)("div",{className:"transition-opacity duration-200",style:{opacity:i?1:0},children:(0,o.jsx)(c,{textToCopy:t})})]})};function h(e){if("string"!=typeof e)return"";const n=e.replace(/\r\n/g,"\n").split("\n");return n.length>0&&""===n[0].trim()&&n.shift(),n.join("\n")}const g=e=>{let{code:n="",lang:t="bash",langs:s=[],filename:l="",title:a="",copiable:c=!1,input:d=""}=e;const[g,m]=(0,i.useState)(!1),[p,x]=(0,i.useState)(t),v=(0,i.useMemo)((()=>{if(!d)return new Set;const e=new Set;return d.split(",").forEach((n=>{if((n=n.trim()).includes("-")){const[t,i]=n.split("-").map((e=>parseInt(e.trim(),10)));for(let n=t;n<=i;n++)e.add(n-1)}else{const t=parseInt(n,10);isNaN(t)||e.add(t-1)}})),e}),[d]),y=(0,i.useMemo)((()=>{if(s&&s.length>0){const e=s.find((e=>e.lang===p));return e?e.code:n}return n}),[s,p,n]),{displayCode:f,highlightLines:b}=(0,i.useMemo)((()=>{const e=y.split("\n"),n=new Set;let t=!1;const i=[];return e.forEach((e=>{const r=e.trim();r.includes("highlight-start")?t=!0:r.includes("highlight-end")?t=!1:r.includes("highlight-next-line")?n.add(i.length+1):(i.push(e),t&&n.add(i.length-1))})),{displayCode:h(i.join("\n")),highlightLines:n}}),[y]),j=(0,i.useMemo)((()=>function(e,n){return["bash","zsh","shell","sh"].includes(n)?"string"!=typeof e?"":e.split("\n").map((e=>e.replace(/^\s*\$\s+/,"").replace(/^\s*\$/,""))).join("\n"):e}(f,p)),[f,p]),k="no"===p?"text":p,C=(0,i.useMemo)((()=>l||(a&&""!==a.trim()?a:"bash"===p?"Terminal":"text"===p||""===p?"text":k)),[l,a,p,k]),w=(0,i.useRef)(null),A=(0,i.useCallback)((async e=>{try{return await navigator.clipboard.writeText(e),Promise.resolve()}catch(n){const t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise(((e,i)=>{const r=document.execCommand("copy");t.remove(),r?e():i(n)}))}}),[]);return(0,i.useEffect)((()=>{if(!w.current)return;const e=w.current.querySelector("pre");if(!e)return;const n=setTimeout((()=>{const n=e.querySelector("code");if(!n)return;if(0===Array.from(n.children).length){const e=(n.textContent||"").split("\n");n.innerHTML="",e.forEach((e=>{const t=document.createElement("span");t.textContent=e,t.style.display="block",n.appendChild(t)}))}const t=Array.from(n.children),i=new Set;t.forEach(((e,n)=>{(d?v.has(n):b.has(n))&&i.add(n)}));const r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=r?56:48,s=r?12:20;t.forEach((e=>{e.style.width="auto",e.style.display="inline-block",e.style.padding="0"}));let l=0;t.forEach((e=>{if(e){e.offsetHeight;const n=e.getBoundingClientRect(),t=Math.max(e.scrollWidth,n.width,e.offsetWidth);t>l&&(l=t)}}));const a=l+o+s;t.forEach(((e,n)=>{const t=i.has(n);if(!t&&d?(e.style.color="rgb(107, 114, 128)",e.style.fontFamily="monospace",e.querySelectorAll("*").forEach((e=>{e.style.color="inherit"}))):t&&(e.style.color="",e.style.fontFamily="",e.querySelectorAll("*").forEach((e=>{e.style.color=""}))),t){const t=i.has(n-1),o=i.has(n+1),s="dark"===document.documentElement.getAttribute("data-theme");e.style.backgroundColor=s?"rgba(59, 130, 246, 0.15)":"rgb(235, 244, 255)",e.style.display="block",e.style.position="relative";let l="0",c="0";t||(l="2px"),o||(c="2px");const d=r?"56px":"48px",u=r?"12px":"20px",h=r?"0":"-20px";e.style.margin=`${l} ${h} ${c} ${h}`,e.style.padding=`4px ${d} 4px ${u}`,e.style.boxSizing="border-box",e.style.display="block",e.style.width=a>0?`${a}px`:"fit-content",e.style.minWidth=r?"100%":"calc(100% + 40px)",e.style.borderRadius="0",e.style.minHeight=r?"40px":"32px",e.style.lineHeight="1.7";const g=e.querySelector(".line-copy-button");g&&g.remove();const m=document.createElement("button");m.className="line-copy-button";const p=r?"18":"16";m.innerHTML=`\n                        <svg width="${p}" height="${p}" viewBox="0 0 16 16" fill="currentColor" style="display: block;">\n                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.75 0.5C1.7835 0.5 1 1.2835 1 2.25V9.75C1 10.7165 1.7835 11.5 2.75 11.5H3.75H4.5V10H3.75H2.75C2.61193 10 2.5 9.88807 2.5 9.75V2.25C2.5 2.11193 2.61193 2 2.75 2H8.25C8.38807 2 8.5 2.11193 8.5 2.25V3H10V2.25C10 1.2835 9.2165 0.5 8.25 0.5H2.75ZM7.75 4.5C6.7835 4.5 6 5.2835 6 6.25V13.75C6 14.7165 6.7835 15.5 7.75 15.5H13.25C14.2165 15.5 15 14.7165 15 13.75V6.25C15 5.2835 14.2165 4.5 13.25 4.5H7.75ZM7.5 6.25C7.5 6.11193 7.61193 6 7.75 6H13.25C13.3881 6 13.5 6.11193 13.5 6.25V13.75C13.5 13.8881 13.3881 14 13.25 14H7.75C7.61193 14 7.5 13.8881 7.5 13.75V6.25Z"/>\n                        </svg>\n                    `;const x=r?"36px":"28px",v="8px",y=r?"6px":"4px";m.style.cssText=`\n                        position: absolute;\n                        right: ${v};\n                        top: 50%;\n                        transform: translateY(-50%);\n                        background: ${s?"rgba(38, 38, 38, 0.95)":"rgba(255, 255, 255, 0.95)"};\n                        border: 1px solid ${s?"rgba(82, 82, 82, 0.8)":"rgba(203, 213, 225, 0.8)"};\n                        outline: none;\n                        cursor: pointer;\n                        padding: ${y};\n                        border-radius: ${r?"8px":"6px"};\n                        color: rgb(107, 114, 128);\n                        opacity: ${r?"0.85":"0"};\n                        transition: all 0.2s ease;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        z-index: 10;\n                        pointer-events: auto;\n                        user-select: none;\n                        -webkit-user-select: none;\n                        -webkit-tap-highlight-color: transparent;\n                        touch-action: manipulation;\n                        width: ${x};\n                        height: ${x};\n                        min-width: ${x};\n                        min-height: ${x};\n                        flex-shrink: 0;\n                        box-shadow: ${s?"0 2px 6px rgba(0, 0, 0, 0.5)":"0 2px 6px rgba(0, 0, 0, 0.2)"};\n                    `;let f=!1;const b=async n=>{if(n.preventDefault(),n.stopPropagation(),f)return;f=!0;const t=e.cloneNode(!0),i=t.querySelector(".line-copy-button");i&&i.remove();let r=t.textContent||"";const o=r.indexOf("$");-1!==o&&(r=r.substring(o+1)),r=r.trim(),A(r).then((()=>{m.innerHTML=`\n                                <svg width="${p}" height="${p}" viewBox="0 0 16 16" fill="currentColor" style="display: block;">\n                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M15.5607 3.99999L15.0303 4.53032L6.23744 13.3232C5.55403 14.0066 4.44599 14.0066 3.76257 13.3232L4.2929 12.7929L3.76257 13.3232L0.969676 10.5303L0.439346 9.99999L1.50001 8.93933L2.03034 9.46966L4.82323 12.2626C4.92086 12.3602 5.07915 12.3602 5.17678 12.2626L13.9697 3.46966L14.5 2.93933L15.5607 3.99999Z"/>\n                                </svg>\n                            `,m.style.color="rgb(34, 197, 94)",setTimeout((()=>{m.innerHTML=`\n                                    <svg width="${p}" height="${p}" viewBox="0 0 16 16" fill="currentColor" style="display: block;">\n                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M2.75 0.5C1.7835 0.5 1 1.2835 1 2.25V9.75C1 10.7165 1.7835 11.5 2.75 11.5H3.75H4.5V10H3.75H2.75C2.61193 10 2.5 9.88807 2.5 9.75V2.25C2.5 2.11193 2.61193 2 2.75 2H8.25C8.38807 2 8.5 2.11193 8.5 2.25V3H10V2.25C10 1.2835 9.2165 0.5 8.25 0.5H2.75ZM7.75 4.5C6.7835 4.5 6 5.2835 6 6.25V13.75C6 14.7165 6.7835 15.5 7.75 15.5H13.25C14.2165 15.5 15 14.7165 15 13.75V6.25C15 5.2835 14.2165 4.5 13.25 4.5H7.75ZM7.5 6.25C7.5 6.11193 7.61193 6 7.75 6H13.25C13.3881 6 13.5 6.11193 13.5 6.25V13.75C13.5 13.8881 13.3881 14 13.25 14H7.75C7.61193 14 7.5 13.8881 7.5 13.75V6.25Z"/>\n                                    </svg>\n                                `,m.style.color="rgb(107, 114, 128)",f=!1}),1500)})).catch((e=>{console.error("Copy failed:",e),f=!1}))},j=()=>{r||(m.style.opacity="1")},k=()=>{r||(m.style.opacity="0")},C=()=>{r||(m.style.backgroundColor=s?"rgba(82, 82, 82, 0.9)":"rgba(229, 229, 229, 0.8)",m.style.opacity="1",m.style.transform="translateY(-50%) scale(1.05)")},w=()=>{r||(m.style.backgroundColor=s?"rgba(38, 38, 38, 0.95)":"rgba(255, 255, 255, 0.95)",m.style.transform="translateY(-50%) scale(1)",m.style.opacity="0")},T=e=>{r&&(m.style.backgroundColor=s?"rgba(82, 82, 82, 1)":"rgba(200, 200, 200, 1)",m.style.transform="translateY(-50%) scale(0.92)",m.style.opacity="1")},L=e=>{r&&setTimeout((()=>{m.style.backgroundColor=s?"rgba(38, 38, 38, 0.95)":"rgba(255, 255, 255, 0.95)",m.style.transform="translateY(-50%) scale(1)",m.style.opacity="0.85"}),100)};r?(m.addEventListener("touchstart",T,{passive:!0}),m.addEventListener("touchend",L,{passive:!0}),m.addEventListener("click",b)):(e.addEventListener("mouseenter",j),e.addEventListener("mouseleave",k),m.addEventListener("mouseenter",C),m.addEventListener("mouseleave",w),m.addEventListener("click",b)),e.appendChild(m)}else{const n=e.querySelector(".line-copy-button");n&&n.remove()}}))}),100);return()=>{clearTimeout(n)}}),[b,f,C,d,v]),(0,o.jsxs)("div",{ref:w,className:"rounded-xl font-mono my-6 overflow-hidden text-sm  bg-neutral-50 border border-neutral-200 shadow-sm  dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,o.jsx)(u,{title:C,code:j,isHovered:g,copiable:c,langs:s,currentLang:p,onLangChange:x}),(0,o.jsx)("div",{className:"bg-white dark:bg-neutral-900 overflow-x-auto",children:(0,o.jsx)(r.A,{language:k,customStyle:{margin:0,padding:"20px",fontSize:"0.875rem",lineHeight:"1.7",fontWeight:400,backgroundColor:"transparent"},wrapLines:!0,wrapLongLines:!1,children:f})})]})}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var i=t(96540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);