"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[7325],{69954:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var o=t(74848),i=t(28453);const s={sidebar_position:4},a="Flashing the Development Board via Fastboot (Using Licheepi 4A as an Example)",r={id:"Package-Manager/cases/case4",title:"Flashing the Development Board via Fastboot (Using Licheepi 4A as an Example)",description:"Currently, the ruyi package manager provides a more convenient method for installing the operating system. By following the steps below and the related instructions, the installation can be completed.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/Package-Manager/cases/case4.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case4",permalink:"/docs/en/docs/Package-Manager/cases/case4",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Flashing Development Board Using dd Method (Taking MilkV Duo as an Example)",permalink:"/docs/en/docs/Package-Manager/cases/case3"},next:{title:"Integration with CMake and Meson",permalink:"/docs/en/docs/Package-Manager/cases/case5"}},d={},l=[{value:"Environment",id:"environment",level:2},{value:"Attach the Device to the Host",id:"attach-the-device-to-the-host",level:3},{value:"Installing the Operating System",id:"installing-the-operating-system",level:3}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"flashing-the-development-board-via-fastboot-using-licheepi-4a-as-an-example",children:"Flashing the Development Board via Fastboot (Using Licheepi 4A as an Example)"}),"\n",(0,o.jsx)(n.p,{children:"Currently, the ruyi package manager provides a more convenient method for installing the operating system. By following the steps below and the related instructions, the installation can be completed."}),"\n",(0,o.jsx)(n.h2,{id:"environment",children:"Environment"}),"\n",(0,o.jsx)(n.p,{children:"This document is based on the following environment:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Hardware: x86_64 PC"}),"\n",(0,o.jsx)(n.li,{children:"Software: Ubuntu 22.04"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"attach-the-device-to-the-host",children:"Attach the Device to the Host"}),"\n",(0,o.jsx)(n.p,{children:"The Licheepi 4A supports booting from onboard eMMC or SD card, and there are two different connection methods for flashing:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Connect the development board to the host PC via a USB cable and flash it using the ",(0,o.jsx)(n.code,{children:"fastboot"})," method."]}),"\n",(0,o.jsxs)(n.li,{children:["Insert the SD card into the host PC using a card reader, flash it using the ",(0,o.jsx)(n.code,{children:"dd"})," method, and then insert it into the development board."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["This example uses the first method, ",(0,o.jsx)(n.code,{children:"fastboot"}),", which is also applicable for flashing images to the onboard eMMC of devices such as the MilkV Meles."]}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:["System-Level Configuration for ",(0,o.jsx)(n.code,{children:"fastboot"})]}),(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ruyi"})," will only prompt the user to attempt ",(0,o.jsx)(n.code,{children:"sudo"})," elevation if a command fails. However, when using ",(0,o.jsx)(n.code,{children:"fastboot flash"}),", the tool will wait indefinitely if no device is detected, without exiting. Therefore, before ",(0,o.jsx)(n.code,{children:"ruyi"})," proceeds with flashing via ",(0,o.jsx)(n.code,{children:"fastboot"}),", it will ask the user to manually confirm that the device appears in the output of ",(0,o.jsx)(n.code,{children:"fastboot devices"}),":"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"Some flashing steps require the use of fastboot, in which case you should\nensure the target device is showing up in fastboot devices output.\nPlease confirm it yourself before the flashing begins.\n\nIs the device identified by fastboot now? (y/N)\n"})}),(0,o.jsxs)(n.p,{children:["When you see this prompt, pause and run ",(0,o.jsx)(n.code,{children:"fastboot devices"})," in a separate terminal window. Only respond with ",(0,o.jsx)(n.code,{children:"y"})," once the device is properly detected; otherwise, the flashing process may hang."]}),(0,o.jsxs)(n.p,{children:["Due to the wide variety of Linux distributions and system configurations, and because the system-level setup required for ",(0,o.jsx)(n.code,{children:"fastboot"})," (such as udev rules) involves low-level details, ",(0,o.jsx)(n.code,{children:"ruyi"})," cannot configure this for you. You\u2019ll need to handle it manually. For security reasons, we also do not recommend running ",(0,o.jsx)(n.code,{children:"ruyi"})," as the root user."]}),(0,o.jsx)(n.p,{children:"The following configuration is provided for reference only. If adjustments are needed to suit your distribution, please make them accordingly. Consult your distribution\u2019s documentation for further details."})]}),"\n",(0,o.jsxs)(n.p,{children:["Connect the LicheePi 4A to the PC via a USB cable to prepare for flashing with ",(0,o.jsx)(n.code,{children:"fastboot"}),". If only want to perform the flashing process as a regular (non-root) user, you may need to configure udev rules. Below is a sample udev configuration for Debian and its derivatives such as Ubuntu (for reference only):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-udev",children:'SUBSYSTEM=="usb", ATTR{idVendor}="2345", ATTR{idProduct}=="7654", MODE="0666", GROUP="plugdev"\nSUBSYSTEM=="usb", ATTR{idVendor}="1234", ATTR{idProduct}=="8888", MODE="0666", GROUP="plugdev"\n'})}),"\n",(0,o.jsxs)(n.p,{children:["After applying the configuration, verify that ",(0,o.jsx)(n.code,{children:"fastboot"})," can detect the device by running ",(0,o.jsx)(n.code,{children:"fastboot devices"}),". If you see an output line like ",(0,o.jsx)(n.code,{children:"0123456789abcdef fastboot"}),", the setup is successful."]}),"\n",(0,o.jsx)(n.h3,{id:"installing-the-operating-system",children:"Installing the Operating System"}),"\n",(0,o.jsxs)(n.p,{children:["Ensure that the ruyi package manager is installed and that ",(0,o.jsx)(n.code,{children:"ruyi -V"})," outputs the version information correctly. Then, proceed with the following steps."]}),"\n",(0,o.jsx)(n.p,{children:"The ruyi package manager provides the functionality to install an operating system on a RISC-V development board. To install an image for any model of RISC-V development board, simply execute:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ ruyi device provision\n"})}),"\n",(0,o.jsx)(n.p,{children:"This command will return the list of RISC-V development boards currently supported by the tool. After selecting a development board, it will return all operating systems supported by the specified development board:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"RuyiSDK Device Provisioning Wizard\n\nThis is a wizard intended to help you install a system on your device for your\ndevelopment pleasure, all with ease.\n\nYou will be asked some questions that help RuyiSDK understand your device and\nyour intended configuration, then packages will be downloaded and flashed onto\nthe device's storage, that you should somehow make available on this host\nsystem beforehand.\n\nNote that, as Ruyi does not run as root, but raw disk access is most likely\nrequired to flash images, you should arrange to allow your user account sudo\naccess to necessary commands such as dd. Flashing will fail if the sudo\nconfiguration does not allow so.\n\nContinue? (y/N) y\n\nThe following devices are currently supported by the wizard. Please pick your device:\n\n1. Allwinner Nezha D1\n2. Canaan Kendryte K230\n3. Milk-V Duo\n4. Milk-V Pioneer Box\n5. SiFive HiFive Unmatched\n6. Sipeed Lichee RV\n7. Sipeed LicheePi 4A\n8. StarFive VisionFive\n9. StarFive VisionFive2\n\nChoice? (1-9)\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In the above example, to install an image for the Sipeed LicheePi 4A, simply enter the corresponding number: ",(0,o.jsx)(n.code,{children:"7"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Choice? (1-9) 7\n\nThe device has the following variants. Please choose the one corresponding to your hardware at hand:\n\n  1. Sipeed LicheePi 4A (8G RAM)\n  2. Sipeed LicheePi 4A (16G RAM)\n\nChoice? (1-2) 2\n\nThe following system configurations are supported by the device variant you have chosen. Please pick the one you want \nto put on the device:\n\n  1. openEuler RISC-V (headless) for Sipeed LicheePi 4A (16G RAM)\n  2. openEuler RISC-V (XFCE) for Sipeed LicheePi 4A (16G RAM)\n  3. RevyOS for Sipeed LicheePi 4A (16G RAM)\n\nChoice? (1-3) 3\n\nWe are about to download and install the following packages for your device:\n\n * board-image/revyos-sipeed-lpi4a\n * board-image/uboot-revyos-sipeed-lpi4a-16g\n\nProceed? (y/N) \n\n"})}),"\n",(0,o.jsx)(n.p,{children:"You only need to follow the prompts step by step."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var o=t(96540);const i={},s=o.createContext(i);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);