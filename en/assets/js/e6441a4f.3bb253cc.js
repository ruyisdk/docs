"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[6946],{1125:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var a=i(4848),r=i(8453);const t={sidebar_position:1},s="Building with Ruyi Compilation Environment (Using Licheepi 4A as an Example)",o={id:"Package-Manager/cases/case1",title:"Building with Ruyi Compilation Environment (Using Licheepi 4A as an Example)",description:"This guide demonstrates the process of installing the Ruyi package manager, setting up a RISC-V compilation and simulation environment using Ruyi, and completing the local compilation of the CoreMark source code, followed by running it on the Licheepi 4A development board.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/Package-Manager/cases/case1.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case1",permalink:"/docs/en/docs/Package-Manager/cases/case1",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528\u6848\u4f8b",permalink:"/docs/en/docs/category/\u4f7f\u7528\u6848\u4f8b"},next:{title:"Building with Vendor-Provided Binary Toolchain (Using MilkV Duo as an Example)",permalink:"/docs/en/docs/Package-Manager/cases/case2"}},l={},c=[{value:"Environment Description",id:"environment-description",level:2},{value:"Installation of Ruyi Package Manager",id:"installation-of-ruyi-package-manager",level:2},{value:"Setting Up the Development Environment Using Ruyi Package Manager",id:"setting-up-the-development-environment-using-ruyi-package-manager",level:2},{value:"Cross-Compiling CoreMark",id:"cross-compiling-coremark",level:2},{value:"Running and Verification",id:"running-and-verification",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"building-with-ruyi-compilation-environment-using-licheepi-4a-as-an-example",children:"Building with Ruyi Compilation Environment (Using Licheepi 4A as an Example)"}),"\n",(0,a.jsx)(n.p,{children:"This guide demonstrates the process of installing the Ruyi package manager, setting up a RISC-V compilation and simulation environment using Ruyi, and completing the local compilation of the CoreMark source code, followed by running it on the Licheepi 4A development board."}),"\n",(0,a.jsx)(n.h2,{id:"environment-description",children:"Environment Description"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Hardware Environment: Licheepi 4A Development Board (th1520)"}),"\n",(0,a.jsx)(n.li,{children:"Software Environment: Debian/openEuler for RISC-V"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"installation-of-ruyi-package-manager",children:"Installation of Ruyi Package Manager"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"[Optional] Clear the currently installed Ruyi package manager and all its data."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ruyi self uninstall --purge\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["Download the ",(0,a.jsx)(n.code,{children:"ruyi"})," tool, grant it executable permissions, and configure it in the environment variables: Download the latest ",(0,a.jsx)(n.code,{children:"ruyi"})," tool from ",(0,a.jsx)(n.a,{href:"https://github.com/RuyiSDK/ruyi/releases/",children:"Ruyi GitHub Releases"})," or ",(0,a.jsx)(n.a,{href:"https://mirror.iscas.ac.cn/RuyiSDK/ruyi/releases/",children:"ISCAS Mirror"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Download the riscv64 version of the Ruyi package manager, place it in the PATH, and grant it executable permissions\nwget https://github.com/ruyisdk/ruyi/releases/download/0.25.0/ruyi-0.25.0.riscv64\nsudo cp ruyi-0.25.0.riscv64 /usr/local/bin/ruyi\nsudo chmod +x ruyi\ncd\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"Verify if the Ruyi package manager is usable"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ruyi --version\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:"Update the latest software source index"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ruyi update\n"})}),"\n",(0,a.jsx)(n.h2,{id:"setting-up-the-development-environment-using-ruyi-package-manager",children:"Setting Up the Development Environment Using Ruyi Package Manager"}),"\n",(0,a.jsxs)(n.ol,{start:"5",children:["\n",(0,a.jsx)(n.li,{children:"View the software repository package index information"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ruyi list --name-contains gnu-plct --category-is toolchain\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"6",children:["\n",(0,a.jsxs)(n.li,{children:["Install gnu: ",(0,a.jsx)(n.code,{children:"ruyi install <package-name>"})]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Install the compilation toolchain gnu-plct-xthead suitable for Licheepi 4A\nruyi install gnu-plct-xthead \n"})}),"\n",(0,a.jsxs)(n.ol,{start:"7",children:["\n",(0,a.jsx)(n.li,{children:"View predefined compilation environments"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ruyi list profiles\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"8",children:["\n",(0,a.jsxs)(n.li,{children:["Create a Ruyi virtual environment ",(0,a.jsx)(n.code,{children:"venv-sipeed"})," using the specified toolchain and simulator configuration.","\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Note: When creating the virtual environment, ensure the correct compiler version and sysroot type are specified.\nIf no version number is specified, the latest version from the software source is used by default, not the locally installed version."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ruyi venv -h\n\n# Create the virtual environment venv-sipeed\nruyi venv -t gnu-plct-xthead sipeed-lpi4a venv-sipeed \n\n# View the tools in the compilation environment\nls venv-sipeed/bin/ \n\n# Activate the virtual environment (The virtual environment can be understood as a container designed to isolate the runtime environment. After activation, the gnu-plct-xthead version toolchain is used within the venv-sipeed environment. Alternatively, without creating a virtual environment, you can configure the environment variable directly to use the gcc compiler located at /home/sipeed/.local/share/ruyi/binaries/riscv64/gnu-plct-xthead-2.8.0-ruyi.20240222/bin)\n. venv-sipeed/bin/ruyi-activate \n\n# Verify if the gcc in the current virtual environment is usable\n\xabRuyi venv-sipeed\xbb sipeed@lpi4a1590:~$ riscv64-plctxthead-linux-gnu-gcc --version \n"})}),"\n",(0,a.jsxs)(n.ol,{start:"9",children:["\n",(0,a.jsx)(n.li,{children:"Download and extract the CoreMark source code as the compilation target"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir coremark && cd coremark\nruyi extract coremark\nls -al\n"})}),"\n",(0,a.jsx)(n.h2,{id:"cross-compiling-coremark",children:"Cross-Compiling CoreMark"}),"\n",(0,a.jsxs)(n.ol,{start:"10",children:["\n",(0,a.jsx)(n.li,{children:"Configure the compilation settings in the CoreMark source code (Refer to the CoreMark repository README)"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sed -i 's/\\bgcc\\b/riscv64-plctxthead-linux-gnu-gcc/g' linux64/core_portme.mak\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"11",children:["\n",(0,a.jsx)(n.li,{children:"Perform cross-compilation and build to obtain the executable program coremark.exe"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"make PORT_DIR=linux64 link\nls -al    # The executable program coremark.exe is newly generated\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"12",children:["\n",(0,a.jsx)(n.li,{children:"View the file attribute information of the riscv64 executable program."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"file coremark.exe\n# The command output displays architecture-related information about the file\n"})}),"\n",(0,a.jsx)(n.h2,{id:"running-and-verification",children:"Running and Verification"}),"\n",(0,a.jsxs)(n.ol,{start:"13",children:["\n",(0,a.jsx)(n.li,{children:"Directly run the riscv64 CoreMark executable program"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./coremark.exe\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var a=i(6540);const r={},t=a.createContext(r);function s(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);