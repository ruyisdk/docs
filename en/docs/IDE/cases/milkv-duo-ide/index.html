<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-IDE/cases/milkv-duo-ide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Milk-V Duo: Compiling, Running, and Debugging Using the riscv64-unknown-linux-musl-bin Toolchain | RuyiSDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ruyisdk.org/docs/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ruyisdk.org/docs/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ruyisdk.org/docs/en/docs/IDE/cases/milkv-duo-ide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="de"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Milk-V Duo: Compiling, Running, and Debugging Using the riscv64-unknown-linux-musl-bin Toolchain | RuyiSDK"><meta data-rh="true" name="description" content="Setting Up the Compilation Environment"><meta data-rh="true" property="og:description" content="Setting Up the Compilation Environment"><link data-rh="true" rel="icon" href="/docs/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ruyisdk.org/docs/en/docs/IDE/cases/milkv-duo-ide"><link data-rh="true" rel="alternate" href="https://ruyisdk.org/docs/docs/IDE/cases/milkv-duo-ide" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://ruyisdk.org/docs/en/docs/IDE/cases/milkv-duo-ide" hreflang="en"><link data-rh="true" rel="alternate" href="https://ruyisdk.org/docs/de/docs/IDE/cases/milkv-duo-ide" hreflang="de"><link data-rh="true" rel="alternate" href="https://ruyisdk.org/docs/docs/IDE/cases/milkv-duo-ide" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/docs/en/blog/rss.xml" title="RuyiSDK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/en/blog/atom.xml" title="RuyiSDK Atom Feed">






<link rel="alternate" type="application/rss+xml" href="/docs/en/biweekly/rss.xml" title="RuyiSDK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/en/biweekly/atom.xml" title="RuyiSDK Atom Feed">
<script src="/js/toc-smooth-scroll.js" async></script><link rel="stylesheet" href="/docs/en/assets/css/styles.29dcbcf8.css">
<script src="/docs/en/assets/js/runtime~main.62d68c3d.js" defer="defer"></script>
<script src="/docs/en/assets/js/main.156ecae2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/en/"><div class="navbar__logo"><img src="/docs/en/img/ruyi-logo-720.svg" alt="RuyiSDK Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/en/img/ruyi-logo-720.svg" alt="RuyiSDK Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">RuyiSDK</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/en/docs/IDE/cases/milkv-duo-ide"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/docs/IDE/cases/milkv-duo-ide" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li><li><a href="/docs/en/docs/IDE/cases/milkv-duo-ide" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/docs/de/docs/IDE/cases/milkv-duo-ide" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/en/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/docs/en/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/en/biweekly">Newsletter</a><a class="navbar__item navbar__link" href="/docs/en/download">Download</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/en/docs/IDE/cases/milkv-duo-ide">Community</a><ul class="dropdown__menu"><li><a href="https://github.com/ruyisdk/ruyisdk/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/docs/en/code_of_conduct">Community Code</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/en/contact">About</a><a href="https://github.com/ruyisdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/en/docs/intro">Hello Ruyi</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/en/docs/category/ruyi-包管理器">Ruyi Package Manager</a><button aria-label="Expand sidebar category &#x27;Ruyi Package Manager&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/en/docs/category/ruyisdk-ide">RuyiSDK IDE</a><button aria-label="Collapse sidebar category &#x27;RuyiSDK IDE&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/docs/IDE/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/en/docs/category/使用案例-1">Cases</a><button aria-label="Collapse sidebar category &#x27;Cases&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/en/docs/IDE/cases/milkv-duo-ide">Milk-V Duo: Compiling, Running, and Debugging Using the riscv64-unknown-linux-musl-bin Toolchain</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/en/docs/category/其他说明">Other instructions</a><button aria-label="Expand sidebar category &#x27;Other instructions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/en/docs/category/k230d">K230D</a><button aria-label="Expand sidebar category &#x27;K230D&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/en/docs/category/法律信息">Legal</a><button aria-label="Expand sidebar category &#x27;Legal&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/en/docs/category/ruyisdk-ide"><span itemprop="name">RuyiSDK IDE</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/en/docs/category/使用案例-1"><span itemprop="name">Cases</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Milk-V Duo: Compiling, Running, and Debugging Using the riscv64-unknown-linux-musl-bin Toolchain</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Milk-V Duo: Compiling, Running, and Debugging Using the riscv64-unknown-linux-musl-bin Toolchain</h1>
<h2 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="setting-up-the-compilation-environment">Setting Up the Compilation Environment<a class="hash-link" href="#setting-up-the-compilation-environment" aria-label="Setting Up the Compilation Environment permalink" title="Setting Up the Compilation Environment permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ol>
<li>
<p>Install the RuyiSDK package manager <a href="/docs/en/docs/Package-Manager/installation">Reference</a></p>
</li>
<li>
<p>Installing the toolchain: this guide uses the gnu-milkv-milkv-duo-musl compiler as an example (you may adjust the toolchain and version as needed).</p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-mono text-neutral-600 dark:text-neutral-400">&gt;_</span><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">Terminal</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-bash" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:slategray"># View resources in the software repository</span><span>
</span></span><span>$ ruyi list --name-contains milkv --category-is toolchain
</span><span>
</span><span><span></span><span class="token" style="color:slategray"># Install the specified toolchain</span><span>
</span></span><span><span>$ ruyi </span><span class="token" style="color:#DD4A68">install</span><span> gnu-milkv-milkv-duo-musl-bin
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># From the returned information, you can view the installation path, e.g., ~/.local/share/ruyi/binaries/x86_64/gnu-milkv-milkv-duo-musl-bin-0.20240731.0+git.67688c7335e7</span><span>
</span></span><span>
</span><span></span></code></pre></div></div>
</li>
<li>
<p>Create and use the Duo compilation environment</p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-mono text-neutral-600 dark:text-neutral-400">&gt;_</span><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">Terminal</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-bash" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:slategray"># View ruyi pre-configured environments</span><span>
</span></span><span>$ ruyi list profiles
</span><span>
</span><span><span></span><span class="token" style="color:slategray"># Create a virtual environment: toolchain is gnu-milkv-milkv-duo-musl-bin</span><span>
</span></span><span>$ ruyi venv -t gnu-milkv-milkv-duo-musl-bin milkv-duo ./venv-milkvduo
</span><span></span></code></pre></div></div>
</li>
</ol>
<h2 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="developing-in-the-ide">Developing in the IDE<a class="hash-link" href="#developing-in-the-ide" aria-label="Developing in the IDE permalink" title="Developing in the IDE permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="preparing-the-source-code">Preparing the Source Code<a class="hash-link" href="#preparing-the-source-code" aria-label="Preparing the Source Code permalink" title="Preparing the Source Code permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>This article uses the application example duo-examples for the milkv-duo development board. Use either of the following methods to obtain the source code:</p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-mono text-neutral-600 dark:text-neutral-400">&gt;_</span><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">Terminal</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-bash" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:slategray"># Method 1: git clone</span><span>
</span></span><span><span>$ </span><span class="token" style="color:#DD4A68">git</span><span> clone https://github.com/milkv-duo/duo-examples.git
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Method 2: ruyi extract command</span><span>
</span></span><span>$ ruyi extract milkv-duo-examples
</span><span></span></code></pre></div></div>
<h3 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="importing-and-setting-project-properties">Importing and Setting Project Properties<a class="hash-link" href="#importing-and-setting-project-properties" aria-label="Importing and Setting Project Properties permalink" title="Importing and Setting Project Properties permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ol>
<li>
<p>File &gt; New &gt; Project</p>
<p><img decoding="async" loading="lazy" alt="1735624096763" src="/docs/en/assets/images/1735624096763-6dc6a1c9dba44c24a9a4068646cc8379.png" width="845" height="381" class="img_ev3q"></p>
</li>
<li>
<p>Select C/C++ &gt; Makefile Project with Existing Code &gt; Next</p>
<p><img decoding="async" loading="lazy" alt="1735623999135" src="/docs/en/assets/images/1735623999135-b9ee8d8e5a8e5dd8d65e1dd126d70cbf.png" width="615" height="621" class="img_ev3q"></p>
</li>
<li>
<p>Import the prepared source code:</p>
<ul>
<li>
<p>Click Browse &gt; Target source code path</p>
</li>
<li>
<p>Toolchain for Indexer Settings：Select RISC-V Cross GCC</p>
</li>
<li>
<p>Finish</p>
<p><img decoding="async" loading="lazy" alt="1735624436834" src="/docs/en/assets/images/1735624436834-91ecc5d885fd62e0d5f54521925da5d9.png" width="615" height="651" class="img_ev3q"></p>
</li>
</ul>
</li>
<li>
<p>Project hello-world &gt; Right-click &gt; Properties to configure related properties</p>
<ol>
<li>
<p>Configure the toolchain path for the project</p>
<p><img decoding="async" loading="lazy" alt="1735624925007" src="/docs/en/assets/images/1735624925007-4702f45bb5a5e63309a5e4fe97979de7.png" width="1285" height="865" class="img_ev3q"></p>
<p>Select the path where the compiler was installed by ruyi install (default is under ~/.local/share/ruyi/binaries/x86_64/), or the bin directory under the created virtual environment.</p>
</li>
<li>
<p>Set compilation properties</p>
<p><img decoding="async" loading="lazy" alt="1735625245878" src="/docs/en/assets/images/1735625245878-4ed00ff12a8f9173d4cea6a5935a239a.png" width="1301" height="869" class="img_ev3q"></p>
</li>
</ol>
</li>
<li>
<p>Edit the Makefile</p>
<ul>
<li>
<p>The project&#x27;s built-in Makefile relies on the envsetup.sh script to pre-set environment variables. In the <a href="https://github.com/milkv-duo/duo-examples/blob/main/README-zh.md" target="_blank" rel="noopener noreferrer">vendor documentation practice</a>, we learned that the compiler prefix, compilation options, and linking parameters were pre-set. For convenience, these are written directly into the Makefile. Note that the TOOLCHAIN_PREFIX path needs to be modified as needed.</p>
</li>
<li>
<p>Compilation parameters:</p>
<ul>
<li>-mcpu=c906fdv : Specifies the target CPU model for cross-compilation</li>
<li>-march=rv64imafdcv0p7xthead : Specifies the target architecture for cross-compilation</li>
<li>-g ：Generates debugging information</li>
</ul>
</li>
<li>
<p>To automate copying the target program to the target device, the Makefile also includes an upload target (this assumes SSH authentication between the PC and the target device; refer to the &quot;SSH Key Configuration&quot; section at the end). Additionally, the relevant directory must be pre-created on the target device (the storage path is customizable, but ensure the scp command path matches the actual environment).</p>
</li>
<li>
<p>You can further modify the Makefile below; this is just a reference.</p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">makefile</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-makefile" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:slategray"># Eclipse toolchain settings</span><span>
</span></span><span><span></span><span class="token" style="color:slategray">#TOOLCHAIN_PREFIX := ~/milkv/duo/duo-examples/host-tools/gcc/riscv64-linux-musl-x86_64/bin/riscv64-unknown-linux-musl-</span><span>
</span></span><span><span>TOOLCHAIN_PREFIX </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:=</span><span> ~/.local/share/ruyi/binaries/x86_64/gnu-milkv-milkv-duo-musl-bin-0.20240731.0+git.67688c7335e7/bin/riscv64-unknown-linux-musl-
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Compilation options -O3</span><span>
</span></span><span><span></span><span class="token" style="color:slategray">#CFLAGS := -mcpu=c906fdv -march=rv64imafdcv0p7xthead -mcmodel=medany -mabi=lp64d -DNDEBUG -I/home/phebe/milkv/duo/duo-examples/include/system</span><span>
</span></span><span><span></span><span class="token" style="color:slategray">#LDFLAGS := -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -L/home/phebe/milkv/duo/duo-examples/libs/system/musl_riscv64</span><span>
</span></span><span><span>CFLAGS </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:=</span><span> -mcpu</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>c906fdv -march</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>rv64imafdcv0p7xthead -g  </span><span class="token" style="color:slategray">#-mcpu=c906fdv -march=rv64imafdcv0p7xthead : One of the two must be set</span><span>
</span></span><span><span>LDFLAGS </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:=</span><span>
</span></span><span>
</span><span><span>TARGET</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>helloworld
</span></span><span>
</span><span><span></span><span class="token" style="color:#07a">ifeq</span><span> </span><span class="token" style="color:#999">(</span><span>,</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TOOLCHAIN_PREFIX</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">error</span><span> TOOLCHAIN_PREFIX is not set</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#07a">endif</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#07a">ifeq</span><span> </span><span class="token" style="color:#999">(</span><span>,</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CFLAGS</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">error</span><span> CFLAGS is not set</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#07a">endif</span><span>
</span></span><span>
</span><span><span>CC </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TOOLCHAIN_PREFIX</span><span class="token" style="color:#999">)</span><span>gcc
</span></span><span>
</span><span><span>SOURCE </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">wildcard</span><span> *.c</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span>OBJS </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">patsubst</span><span> %.c,%.o,</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>SOURCE</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Default target</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">all</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token target" style="color:#e90">$</span><span class="token target" style="color:#905">(TARGET)</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>OBJS</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span>   </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CC</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CFLAGS</span><span class="token" style="color:#999">)</span><span> -o </span><span class="token" style="color:#e90">$@</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>OBJS</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>LDFLAGS</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token target" style="color:#905">%.o</span><span class="token" style="color:#999">:</span><span> %.c
</span></span><span><span>   </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CC</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CFLAGS</span><span class="token" style="color:#999">)</span><span> -o </span><span class="token" style="color:#e90">$@</span><span> -c </span><span class="token" style="color:#e90">$&lt;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Upload target</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">upload</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">   scp </span><span class="token target" style="color:#e90">$</span><span class="token target" style="color:#905">(TARGET) root@192.168.42.1</span><span class="token" style="color:#999">:</span><span>/root/target/</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token builtin-target" style="color:#690">.PHONY</span><span class="token" style="color:#999">:</span><span> clean upload
</span></span><span><span></span><span class="token target" style="color:#905">clean</span><span class="token" style="color:#999">:</span><span>
</span></span><span><span>   rm -f *.o </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Make &#x27;all&#x27; target depend on &#x27;upload&#x27; to automatically upload after building</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">all</span><span class="token" style="color:#999">:</span><span> upload
</span></span><span></span></code></pre></div></div>
</li>
</ul>
</li>
<li>
<p>Open a Terminal window in the IDE, create an SSH Terminal to log into the target device and perform related operations. If needed, you can also create a Local Terminal window for combined use. This depends on personal preference. Specific steps:</p>
<ul>
<li>
<p>Window &gt; Show View &gt; Terminal</p>
</li>
<li>
<p>Terminal: Open a new Terminal View/Open a Terminal &gt; SSH Terminal &gt; Enter Host, User, Password (milkvduo&#x27;s root password is: milkv) as shown below:</p>
<p><img decoding="async" loading="lazy" alt="1735626678903" src="/docs/en/assets/images/1735626678903-c96fe363723450c4a8e1e1e7d6fe4fbf.png" width="545" height="537" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="1735626740680" src="/docs/en/assets/images/1735626740680-12ce3f29f2603c912607801a9e7128ce.png" width="937" height="333" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="1735626766840" src="/docs/en/assets/images/1735626766840-d38056ea55735d53071b5eb8293ffe43.png" width="355" height="555" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="1735626979037" src="/docs/en/assets/images/1735626979037-2eeda4af40ff487e912a1b66b14fb2be.png" width="933" height="295" class="img_ev3q"></p>
</li>
<li>
<p>Before using the <code>scp</code> command in the Makefile, make sure the corresponding directory structure has already been created on the target host. This ensures that files can be transferred to the correct destination path. After the build process completes, the target program will appear in the specified directory.</p>
<p><img decoding="async" loading="lazy" alt="1736776549440" src="/docs/en/assets/images/1736776549440-6a9a87ae4ad22e22b9f5f5071768290f.png" width="681" height="303" class="img_ev3q"></p>
</li>
</ul>
</li>
</ol>
<h3 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="executing-the-build">Executing the Build<a class="hash-link" href="#executing-the-build" aria-label="Executing the Build permalink" title="Executing the Build permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>After preparing the above configurations and modifications, right-click the project and click &quot;Build Project&quot;. If the build is successful:</p>
<ol>
<li>
<p>The Console window shows no errors.</p>
<p><img decoding="async" loading="lazy" alt="1736776684233" src="/docs/en/assets/images/1736776684233-b536fb0e06d0fd5a19b72d63e3307547.png" width="973" height="396" class="img_ev3q"></p>
</li>
<li>
<p>The SSH Terminal window shows the successfully transferred helloworld target program.</p>
<p><img decoding="async" loading="lazy" alt="1736776707622" src="/docs/en/assets/images/1736776707622-698cad9f139e63a66a3392f5193286d7.png" width="691" height="298" class="img_ev3q"></p>
</li>
</ol>
<h3 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="transferring-the-target-program-to-the-target-device">Transferring the Target Program to the Target Device<a class="hash-link" href="#transferring-the-target-program-to-the-target-device" aria-label="Transferring the Target Program to the Target Device permalink" title="Transferring the Target Program to the Target Device permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>If the upload target is defined in the Makefile, the target program transfer is already completed during the &quot;Build Project&quot; step.</li>
<li>If the upload target is not defined in the Makefile, you can manually execute <code>scp helloworld root@192.168.42.1:/root/target/</code> to transfer the target program.</li>
</ul>
<h3 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="running-the-target-program-and-displaying-execution-results">Running the Target Program and Displaying Execution Results<a class="hash-link" href="#running-the-target-program-and-displaying-execution-results" aria-label="Running the Target Program and Displaying Execution Results permalink" title="Running the Target Program and Displaying Execution Results permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>There are multiple ways to run the target program in the IDE. Choose based on your habits and needs. Here are some methods I have tried; more methods are welcome.</p>
<h4 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="ssh-terminal">SSH Terminal<a class="hash-link" href="#ssh-terminal" aria-label="SSH Terminal permalink" title="SSH Terminal permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>You can view and run the helloworld target program in the SSH Terminal window:</p>
<p><img decoding="async" loading="lazy" alt="1736777304796" src="/docs/en/assets/images/1736777304796-9de9b5cab0b9f6442ac969a29af8bd3f.png" width="641" height="316" class="img_ev3q"></p>
<h4 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="cc-remote-application">C/C++ Remote Application<a class="hash-link" href="#cc-remote-application" aria-label="C/C++ Remote Application permalink" title="C/C++ Remote Application permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>Steps: Right-click the project &gt; Run As &gt; Run Configurations &gt; C/C++ Remote Application</p>
<p>Refer to the image below (the image is a screenshot in Debug mode; since the configuration is the same, it is used to explain the key points). Configure the relevant parameters as follows:</p>
<ul>
<li>
<p>Project: Default, i.e., the target program name</p>
</li>
<li>
<p>C/C++ Application: Also defaults to the target program name (Search Project to specify)</p>
</li>
<li>
<p>Connect: New &gt; SSH</p>
</li>
<li>
<p>Remote Absolute File Path for C/C++ Application: Enter the absolute path of the target program on the RISC-V device (must match the path in the Makefile upload scp command)</p>
</li>
<li>
<p>Skip download to target path: It is recommended to check this in the current version and use the upload target in the Makefile to transfer the target program from the host to the target board. This is because, without checking, the IDE requires the RSE (Remote System Explorer) plugin, and the target device system must support sftp-server. Currently, milkvduo does not support sftp-server, so this feature is temporarily unavailable.</p>
<p><img decoding="async" loading="lazy" alt="1736321809187" src="/docs/en/assets/images/1736321809187-6bc23f44ec61d6c10f9972d1db79214b.png" width="1751" height="877" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="1736320799175" src="/docs/en/assets/images/1736320799175-287e0e03b0b9c5922b92b9b2961c1c67.png" width="643" height="518" class="img_ev3q"></p>
</li>
</ul>
<p>Running effect demonstration:</p>
<ul>
<li>
<p><a href="/docs/en/assets/files/run1-20b03660694655ff32bc183948eaac7d.gif" target="_blank">Successful remote run with Skip download to target path checked</a></p>
</li>
<li>
<p><a href="/docs/en/assets/files/run1-20b03660694655ff32bc183948eaac7d.gif" target="_blank">Error when running without Skip download to target path checked</a></p>
<blockquote>
<p>milkv duo img currently does not support sftp: <a href="https://github.com/milkv-duo/duo-buildroot-sdk/issues/167" target="_blank" rel="noopener noreferrer">https://github.com/milkv-duo/duo-buildroot-sdk/issues/167</a>. This issue will be resolved when the milkvduo image supports sftp-server.</p>
</blockquote>
</li>
</ul>
<h3 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="debugging">Debugging<a class="hash-link" href="#debugging" aria-label="Debugging permalink" title="Debugging permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="preparing-the-debugging-example">Preparing the Debugging Example<a class="hash-link" href="#preparing-the-debugging-example" aria-label="Preparing the Debugging Example permalink" title="Preparing the Debugging Example permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>The helloworld example is not ideal for debugging. To demonstrate debugging, breakpoints, and single-step tracking, another example is used here.</p>
<p><strong>sumdemo.c</strong></p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">c</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-c" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token macro directive-hash" style="color:#905">#</span><span class="token macro directive" style="color:#07a">include</span><span class="token macro" style="color:#905"> </span><span class="token macro" style="color:#690">&lt;stdio.h&gt;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#07a">int</span><span> </span><span class="token" style="color:#DD4A68">Sum</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">int</span><span> s</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#07a">int</span><span> e</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#999">{</span><span>
</span></span><span><span>   </span><span class="token" style="color:#07a">int</span><span> result </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span>   </span><span class="token" style="color:#07a">for</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">int</span><span> i </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> s</span><span class="token" style="color:#999">;</span><span> i </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;=</span><span> e</span><span class="token" style="color:#999">;</span><span> i</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">++</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span>   </span><span class="token" style="color:#999">{</span><span>
</span></span><span><span>      result </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+=</span><span> i</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span>   </span><span class="token" style="color:#999">}</span><span>
</span></span><span><span>   </span><span class="token" style="color:#07a">return</span><span> result</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span></span><span class="token" style="color:#999">}</span><span>
</span></span><span>
</span><span>
</span><span><span></span><span class="token" style="color:#07a">int</span><span> </span><span class="token" style="color:#DD4A68">main</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#999">{</span><span>
</span></span><span><span>   </span><span class="token" style="color:#07a">int</span><span> start </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span>   </span><span class="token" style="color:#07a">int</span><span> end </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">10</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span>   </span><span class="token" style="color:#DD4A68">printf</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;I will begin\n&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span>   </span><span class="token" style="color:#07a">int</span><span> n </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">Sum</span><span class="token" style="color:#999">(</span><span>start</span><span class="token" style="color:#999">,</span><span> end</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span>   </span><span class="token" style="color:#DD4A68">printf</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;running done, result is: [%d-%d]=%d\n&quot;</span><span class="token" style="color:#999">,</span><span> start</span><span class="token" style="color:#999">,</span><span> end</span><span class="token" style="color:#999">,</span><span> n</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span>   </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span>
</span></span><span><span></span><span class="token" style="color:#999">}</span><span>
</span></span><span>
</span><span>
</span><span></span></code></pre></div></div>
<p><strong>Makefile：</strong></p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">makefile</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-makefile" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:slategray"># Eclipse toolchain settings</span><span>
</span></span><span><span></span><span class="token" style="color:slategray">#TOOLCHAIN_PREFIX := ~/milkv/duo/duo-examples/host-tools/gcc/riscv64-linux-musl-x86_64/bin/riscv64-unknown-linux-musl-</span><span>
</span></span><span><span>TOOLCHAIN_PREFIX </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:=</span><span> ~/.local/share/ruyi/binaries/x86_64/gnu-milkv-milkv-duo-musl-bin-0.20240731.0+git.67688c7335e7/bin/riscv64-unknown-linux-musl-
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Compilation options -O3   -static</span><span>
</span></span><span><span></span><span class="token" style="color:slategray">#CFLAGS := -mcpu=c906fdv -march=rv64imafdcv0p7xthead -mcmodel=medany -mabi=lp64d -DNDEBUG -I~/milkv/duo/duo-examples/include/system</span><span>
</span></span><span><span></span><span class="token" style="color:slategray">#LDFLAGS := -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -L/home/phebe/milkv/duo/duo-examples/libs/system/musl_riscv64</span><span>
</span></span><span><span>CFLAGS </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:=</span><span> -march</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>rv64imafdcv0p7xthead -g
</span></span><span><span>LDFLAGS </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:=</span><span>
</span></span><span>
</span><span><span>TARGET</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>sumdemo
</span></span><span>
</span><span><span></span><span class="token" style="color:#07a">ifeq</span><span> </span><span class="token" style="color:#999">(</span><span>,</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TOOLCHAIN_PREFIX</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">error</span><span> TOOLCHAIN_PREFIX is not set</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#07a">endif</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:#07a">ifeq</span><span> </span><span class="token" style="color:#999">(</span><span>,</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CFLAGS</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">error</span><span> CFLAGS is not set</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token" style="color:#07a">endif</span><span>
</span></span><span>
</span><span><span>CC </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TOOLCHAIN_PREFIX</span><span class="token" style="color:#999">)</span><span>gcc
</span></span><span><span>SOURCE </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>wildcard*.c</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span>OBJS </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>patsubst%.c,%.o,</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>SOURCE</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span>
</span><span><span></span><span class="token" style="color:slategray"># Default target</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">all</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token target" style="color:#e90">$</span><span class="token target" style="color:#905">(TARGET)</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>OBJS</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span>   </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CC</span><span class="token" style="color:#999">)</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CFLAGS</span><span class="token" style="color:#999">)</span><span> -o </span><span class="token" style="color:#e90">$@$</span><span class="token" style="color:#999">(</span><span>OBJS</span><span class="token" style="color:#999">)</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>LDFLAGS</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token target" style="color:#905">%.o</span><span class="token" style="color:#999">:</span><span> %.c
</span></span><span><span>   </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CC</span><span class="token" style="color:#999">)</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>CFLAGS</span><span class="token" style="color:#999">)</span><span> -o </span><span class="token" style="color:#e90">$@</span><span> -c </span><span class="token" style="color:#e90">$&lt;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Upload target</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">upload</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">   scp </span><span class="token target" style="color:#e90">$</span><span class="token target" style="color:#905">(TARGET) root@192.168.42.1</span><span class="token" style="color:#999">:</span><span>/root/target/</span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token builtin-target" style="color:#690">.PHONY</span><span class="token" style="color:#999">:</span><span> clean upload
</span></span><span><span></span><span class="token target" style="color:#905">clean</span><span class="token" style="color:#999">:</span><span>
</span></span><span><span>   rm -f *.o </span><span class="token" style="color:#e90">$</span><span class="token" style="color:#999">(</span><span>TARGET</span><span class="token" style="color:#999">)</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Make &#x27;all&#x27; target depend on &#x27;upload&#x27; to automatically upload after building</span><span>
</span></span><span><span></span><span class="token target" style="color:#905">all</span><span class="token" style="color:#999">:</span><span> upload
</span></span><span></span></code></pre></div></div>
<h4 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="preparing-gdbserver">Preparing gdbserver<a class="hash-link" href="#preparing-gdbserver" aria-label="Preparing gdbserver permalink" title="Preparing gdbserver permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>The original buildroot image does not come with gdbserver. You can copy the original gdbserver executable or use RuyiSDK to add gdbserver and rebuild the image.</p>
<ol>
<li>
<p>Download the original gdbserver executable: <a href="https://github.com/milkv-duo/duo-buildroot-sdk/blob/develop/ramdisk/rootfs/public/gdbserver/riscv_musl/usr/bin/gdbserver" target="_blank" rel="noopener noreferrer">https://github.com/milkv-duo/duo-buildroot-sdk/blob/develop/ramdisk/rootfs/public/gdbserver/riscv_musl/usr/bin/gdbserver</a></p>
</li>
<li>
<p>Copy the downloaded gdbserver to the Milk-V Duo device&#x27;s path:</p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-mono text-neutral-600 dark:text-neutral-400">&gt;_</span><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">Terminal</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-bash" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>$ </span><span class="token" style="color:#DD4A68">scp</span><span> gdbserver root@192.168.42.1:/usr/bin/
</span></span><span>
</span><span><span>$ </span><span class="token" style="color:#DD4A68">ssh</span><span> root@192.168.42.1 </span><span class="token" style="color:#690">&quot;chmod +x /usr/bin/gdbserver&quot;</span><span>
</span></span><span>
</span><span></span></code></pre></div></div>
</li>
</ol>
<h4 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="debugging-in-terminal">Debugging in Terminal<a class="hash-link" href="#debugging-in-terminal" aria-label="Debugging in Terminal permalink" title="Debugging in Terminal permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>This operation is no different from debugging using the OS Terminal. Those accustomed to using commands can try this.</p>
<p>Terminal supports Local Terminal and SSH Terminal, among others. You can open a Local Terminal and an SSH Terminal connected to milkv duo for operations.</p>
<p>Steps for remote debugging using GDBServer + GDB commands:</p>
<ol>
<li>
<p>On the milkvduo device (operate in the helloworld directory):</p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-mono text-neutral-600 dark:text-neutral-400">&gt;_</span><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">Terminal</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-bash" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#999">[</span><span>root@milkv-duo</span><span class="token" style="color:#999">]</span><span>~/target</span><span class="token" style="color:slategray"># gdbserver :2345 ./sumdemo</span><span>
</span></span><span><span>Process ./sumdemo created</span><span class="token" style="color:#999">;</span><span> pid </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">1802</span><span>
</span></span><span><span>Listening on port </span><span class="token" style="color:#905">2345</span><span>
</span></span><span></span></code></pre></div></div>
</li>
<li>
<p>On the PC (operate in the helloworld.c directory):</p>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-mono text-neutral-600 dark:text-neutral-400">&gt;_</span><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">Terminal</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-bash" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>$ </span><span class="token" style="color:#DD4A68">cd</span><span> ~/ews-milkvduo-t01/sumdemo
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># Check gdb version, start debugging</span><span>
</span></span><span><span></span><span class="token" style="color:slategray"># Use the ruyi virtual environment for debugging, activate the virtual environment, and compile in the virtual environment</span><span>
</span></span><span><span>$ </span><span class="token" style="color:#DD4A68">source</span><span> ~/venv-milkvduo/bin/ruyi-activate
</span></span><span>$ riscv64-unknown-linux-musl-gdb --version
</span><span>$ riscv64-unknown-linux-musl-gdb ./sumdemo
</span><span>
</span><span><span>$ target remote </span><span class="token" style="color:#905">192.168</span><span>.42.1:2345   </span><span class="token" style="color:slategray"># Port number must match the gdbserver side</span><span>
</span></span><span>
</span><span><span>$ </span><span class="token" style="color:#DD4A68">break</span><span> sumdemo.c:8                 </span><span class="token" style="color:slategray"># Set a breakpoint at line 8</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color:slategray"># The following are commonly used; use as needed</span><span>
</span></span><span><span>$ c                                 </span><span class="token" style="color:slategray"># Continue, resume program execution until the next breakpoint</span><span>
</span></span><span><span>$ disp result                       </span><span class="token" style="color:slategray"># Track a variable, display its value each time it stops</span><span>
</span></span><span><span>$ print result                      </span><span class="token" style="color:slategray"># Print the internal variable result</span><span>
</span></span><span>
</span><span></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="1736326691511" src="/docs/en/assets/images/1736326691511-602fefed9971143b123fa9bc87fcc1d6.png" width="2288" height="1250" class="img_ev3q"></p>
<p><a href="/docs/en/assets/files/gdb-terminal-1-16261d0bad6c2994f0614e94a40bc46c.gif" target="_blank">Local Terminal + SSH Terminal | GDBServer + GDB Debugging Demonstration</a></p>
</li>
</ol>
<h4 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="cc-remote-application-1">C/C++ Remote Application<a class="hash-link" href="#cc-remote-application-1" aria-label="C/C++ Remote Application permalink" title="C/C++ Remote Application permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>Refer to the image below to configure the relevant parameters. Key points:</p>
<ul>
<li>
<p>Project: Default, i.e., the target program name</p>
</li>
<li>
<p>C/C++ Application: Also defaults to the target program name (Search Project to specify)</p>
</li>
<li>
<p>Connect: New &gt; SSH</p>
</li>
<li>
<p>Remote Absolute File Path for C/C++ Application: Enter the absolute path of the target program on the RISC-V device (must match the path in the Makefile upload scp command)</p>
</li>
<li>
<p>Skip download to target path: It is recommended to check this in the current version and use the upload target in the Makefile to transfer the target program from the host to the target board. This is because, without checking, the IDE requires the RSE (Remote System Explorer) plugin, and the target device system must support sftp-server. Currently, milkvduo does not support sftp-server, so this feature is temporarily unavailable.</p>
</li>
<li>
<p>Debugger &gt; Main &gt; GDB Debugger: Specify the GDB path. In this example, use <code>~/.local/share/ruyi/binaries/x86_64/gnu-milkv-milkv-duo-musl-bin-0.20240731.0+git.67688c7335e7/bin/riscv64-unknown-linux-musl-gdb</code></p>
</li>
<li>
<p>Debugger &gt; GDB &gt; GDBserver setting: Specify GDBServer and communication port</p>
<p><img decoding="async" loading="lazy" alt="1736320771077" src="/docs/en/assets/images/1736320771077-b2eba9e5920439bb66683be650cc92b7.png" width="1453" height="877" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="1736320799175" src="/docs/en/assets/images/1736320799175-287e0e03b0b9c5922b92b9b2961c1c67.png" width="643" height="518" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="1736320837701" src="/docs/en/assets/images/1736320837701-601118532bad335c4446308336a7a312.png" width="1455" height="877" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="1736324370390" src="/docs/en/assets/images/1736324370390-53dce551f739f76108dee5230fec28f0.png" width="1746" height="875" class="img_ev3q"></p>
<p>As with running, since milkv duo currently does not support sftp-server, the remote transfer function for the target program is unavailable, and execution will result in the following error.</p>
<p><img decoding="async" loading="lazy" alt="1736320589408" src="/docs/en/assets/images/1736320589408-f58e692d1667d546d2ec1d2a0ecd31a8.png" width="571" height="313" class="img_ev3q"></p>
<p>Checking Skip download to target path skips downloading the target program, bypassing this issue. Use the upload definition in the Makefile to complete the target program transfer from the host to the target device during the build phase.</p>
<p><img decoding="async" loading="lazy" alt="1736321809187" src="/docs/en/assets/images/1736321809187-6bc23f44ec61d6c10f9972d1db79214b.png" width="1751" height="877" class="img_ev3q"></p>
</li>
</ul>
<p>Running effect demonstration:</p>
<ul>
<li><a href="/docs/en/assets/files/gdb-withdownload-42ab9ed9dc98bbdfb17db1d37056954b.gif" target="_blank">Error when running without Skip download to target path checked</a></li>
<li><a href="/docs/en/assets/files/gdb-withoutdownload-cc4c7c349461da64f9bc5d27eb0ff876.gif" target="_blank">Successful run with Skip download to target path checked</a></li>
</ul>
<h2 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="additional-notes">Additional Notes<a class="hash-link" href="#additional-notes" aria-label="Additional Notes permalink" title="Additional Notes permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 class="anchor [scroll-margin-top:calc(var(--ifm-navbar-height)_+_0.5rem)]" id="ssh-key-configuration">SSH Key Configuration<a class="hash-link" href="#ssh-key-configuration" aria-label="SSH Key Configuration permalink" title="SSH Key Configuration permalink"><svg xmlns="http://www.w3.org/2000/svg" width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Here is a detailed explanation of SSH key configuration:</p>
<p>By configuring SSH key-based passwordless login between the host and the Milk-V Duo, the system can automatically connect and transfer the compiled binary files to a specified path on the Milk-V Duo after the build process.</p>
<ol>
<li>
<p>Execute <code>ssh-keygen</code> on the host</p>
</li>
<li>
<p>Add the public key to the Milk-V Duo:</p>
</li>
</ol>
<div class="rounded-xl font-mono my-6 overflow-hidden text-sm bg-neutral-50 border border-neutral-200 shadow-sm dark:bg-neutral-900 dark:border-neutral-800 dark:shadow-black/30"><div class="flex items-center justify-between pl-4 pr-3 py-0 min-h-[48px] bg-neutral-50 dark:bg-neutral-800"><div class="flex items-center gap-3"><div class="flex items-center gap-2"><span class="text-[13px] font-mono text-neutral-600 dark:text-neutral-400">&gt;_</span><span class="text-[13px] font-normal tracking-normal text-neutral-600 dark:text-neutral-400 font-sans">Terminal</span></div></div></div><div class="bg-white dark:bg-neutral-900 overflow-x-auto"><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:0.875rem;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:20px;margin:0;overflow:auto;font-weight:400;background-color:transparent"><code class="language-bash" style="white-space:pre;color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span>$ </span><span class="token" style="color:#DD4A68">cat</span><span> ~/.ssh/milkvduo.pub </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#DD4A68">ssh</span><span> root@192.168.42.1 </span><span class="token" style="color:#690">&#x27;mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys&#x27;</span><span>
</span></span><span></span></code></pre></div></div>
<ol start="3">
<li>Verify: <code>ssh root@192.168.42.1</code></li>
</ol>
<p>If successful, you will no longer need to enter a password.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link bg-transparent border-0 shadow-none no-underline block transition-colors duration-200 hover:text-[var(--ifm-link-color)] pagination-nav__link--prev" href="/docs/en/docs/category/使用案例-1"><div class="pagination-nav__sublabel text-xs text-[var(--ifm-color-emphasis-600)] mb-1 font-normal">Previous</div><div class="pagination-nav__label inline-flex items-center font-semibold text-base text-[var(--ifm-font-color-base)]"><span class="mr-1 text-lg">‹</span><span>使用案例</span></div></a><a class="pagination-nav__link bg-transparent border-0 shadow-none no-underline block transition-colors duration-200 hover:text-[var(--ifm-link-color)] pagination-nav__link--next" href="/docs/en/docs/category/其他说明"><div class="pagination-nav__sublabel text-xs text-[var(--ifm-color-emphasis-600)] mb-1 font-normal">Next</div><div class="pagination-nav__label inline-flex items-center font-semibold text-base text-[var(--ifm-font-color-base)]"><span>其他说明</span><span class="ml-1 text-lg">›</span></div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#setting-up-the-compilation-environment">Setting Up the Compilation Environment</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#developing-in-the-ide">Developing in the IDE</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#preparing-the-source-code">Preparing the Source Code</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#importing-and-setting-project-properties">Importing and Setting Project Properties</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#executing-the-build">Executing the Build</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#transferring-the-target-program-to-the-target-device">Transferring the Target Program to the Target Device</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#running-the-target-program-and-displaying-execution-results">Running the Target Program and Displaying Execution Results</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#debugging">Debugging</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#additional-notes">Additional Notes</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/en/docs/IDE/cases/milkv-duo-ide#ssh-key-configuration">SSH Key Configuration</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer_xBL4"><div class="footer__links_rq3l"><div class="footer__col_I_Ea"><div class="footer__title_pF9u">Ecosystem</div><ul class="footer__items_OetA"><li class="footer__item_N3As"><a href="/docs/en/docs/intro">RuyiSDK</a></li><li class="footer__item_N3As"><a href="https://docs.revyos.dev/en" target="_blank" rel="noopener noreferrer">RevyOS<!-- --> <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item_N3As"><a href="https://matrix.ruyisdk.org/" target="_blank" rel="noopener noreferrer">Support Matrix<!-- --> <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="footer__col_I_Ea"><div class="footer__title_pF9u">Community</div><ul class="footer__items_OetA"><li class="footer__item_N3As"><a href="https://ruyisdk.cn" target="_blank" rel="noopener noreferrer">RuyiSDK Community (Chinese Website)<!-- --> <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item_N3As"><a href="https://github.com/ruyisdk/ruyisdk/discussions" target="_blank" rel="noopener noreferrer">Discussion<!-- --> <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item_N3As"><a href="/docs/en/Home/StatisticalDataPages">Data Overview</a></li><li class="footer__item_N3As"><a href="https://github.com/plctlab/weloveinterns/blob/master/open-internships.md" target="_blank" rel="noopener noreferrer">Open Internship<!-- --> <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="footer__col_I_Ea"><div class="footer__title_pF9u">Follow Us</div><ul class="footer__items_OetA"><li class="footer__item_N3As"><a class="hover-wechat-link" href="/docs/en/contact">WeChat Official Account</a></li><li class="footer__item_N3As"><a class="hover-qq-link" href="/docs/en/contact">QQ Group</a></li><li class="footer__item_N3As"><a href="https://plctlab.org/" target="_blank" rel="noopener noreferrer">PLCT Lab<!-- --> <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="footer__col_I_Ea"><div class="footer__title_pF9u">More Developer Tools</div><ul class="footer__items_OetA"><li class="footer__item_N3As"><a href="https://github.com/Glavo/JetBrains-IDE-Multiarch" target="_blank" rel="noopener noreferrer">JetBrains IDE Multiarch<!-- --> <svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__copyright_xAbK">Copyright © 2024-2025 Institute of Software, CAS</div></footer></div>
</body>
</html>