"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[8919],{49932:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var t=r(74848),o=r(28453),a=r(60854);const i={sidebar_position:6},s="Verwendung von QEMU und LLVM",c={id:"Package-Manager/cases/case6",title:"Verwendung von QEMU und LLVM",description:"Dieses Beispiel basiert auf Coremark f\xfcr MilkV Duo erstellen",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/Package-Manager/cases/case6.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case6",permalink:"/docs/de/docs/Package-Manager/cases/case6",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Integration mit CMake und Meson",permalink:"/docs/de/docs/Package-Manager/cases/case5"},next:{title:"Kompilieren der milkv-duo-examples Beispielprogramme",permalink:"/docs/de/docs/Package-Manager/cases/case7"}},l={},d=[];function u(e){const n={a:"a",h1:"h1",p:"p",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"verwendung-von-qemu-und-llvm",children:"Verwendung von QEMU und LLVM"}),"\n",(0,t.jsxs)(n.p,{children:["Dieses Beispiel basiert auf ",(0,t.jsx)(n.a,{href:"/docs/de/docs/Package-Manager/cases/case2",children:"Coremark f\xfcr MilkV Duo erstellen"})]}),"\n",(0,t.jsx)(n.p,{children:"Zun\xe4chst installieren Sie die erforderlichen Abh\xe4ngigkeiten:"}),"\n",(0,t.jsx)(a.A,{lang:"shell",code:"\nruyi install llvm-upstream gnu-plct qemu-user-riscv-upstream\n"}),"\n",(0,t.jsx)(n.p,{children:"Erstellen Sie eine virtuelle Umgebung und aktivieren Sie diese:"}),"\n",(0,t.jsx)(a.A,{lang:"shell",code:"\nruyi venv -t llvm-upstream --sysroot-from gnu-plct -e qemu-user-riscv-upstream generic venv\n. venv/bin/ruyi-activate\n"}),"\n",(0,t.jsx)(n.p,{children:"Entpacken Sie Coremark und kompilieren Sie es:"}),"\n",(0,t.jsx)(a.A,{lang:"shell",code:"\n\xabRuyi milkv-venv\xbb $ mkdir coremark\n\xabRuyi milkv-venv\xbb $ cd coremark\n\xabRuyi milkv-venv\xbb $ ruyi extract coremark\n\n\xabRuyi milkv-venv\xbb $ sed -i 's/\\bgcc\\b/riscv64-unknown-linux-gnu-gcc/g' linux64/core_portme.mak\n\xabRuyi milkv-venv\xbb $ make PORT_DIR=linux64 link\n"}),"\n",(0,t.jsx)(n.p,{children:"F\xfchren Sie Coremark nun \xfcber QEMU aus:"}),"\n",(0,t.jsx)(a.A,{lang:"shell",code:"\n$ ruyi-qemu coremark.exe\n2K performance run parameters for coremark.\nCoreMark Size    : 666\nTotal ticks      : 19567\nTotal time (secs): 19.567000\nIterations/Sec   : 10221.290949\nIterations       : 200000\nCompiler version : GCCClang 17.0.5\nCompiler flags   : -O2   -lrt\nMemory location  : Please put data memory location here\n                        (e.g. code in flash, data on heap etc)\nseedcrc          : 0xe9f5\n[0]crclist       : 0xe714\n[0]crcmatrix     : 0x1fd7\n[0]crcstate      : 0x8e3a\n[0]crcfinal      : 0x4983\nCorrect operation validated. See readme.txt for run and reporting rules.\nCoreMark 1.0 : 10221.290949 / GCCClang 17.0.5 -O2   -lrt / Heap\n"})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},60854:(e,n,r)=>{r.d(n,{A:()=>m});var t=r(96540),o=r(26348),a=r(19337),i=r(30222),s=r(45773),c=r(35404),l=r(96813),d=r(74848);const u=e=>{let{textToCopy:n,themeStyles:r}=e;const[o,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),u={...r.copyButton,backgroundColor:i?r.copyButtonHoverBg:"transparent",color:i?r.copyButtonHoverColor:r.copyButton.color};return(0,d.jsx)("button",{onClick:()=>{n&&navigator.clipboard.writeText(n).then((()=>{a(!0),setTimeout((()=>a(!1)),2e3)})).catch((e=>{console.error("Failed to copy text: ",e);try{const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),a(!0),setTimeout((()=>a(!1)),2e3)}catch(r){console.error("Fallback copy method failed: ",r)}}))},style:u,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),"aria-label":"Copy code",children:o?(0,d.jsx)(s.A,{size:16,style:{color:"#4ade80"}}):(0,d.jsx)(c.A,{size:16})})},m=e=>{let{code:n="",lang:r="no",filename:s,showTitleCopyButton:c="bash"!==r}=e;const[m,p]=(0,t.useState)("dark");(0,t.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>document.documentElement.getAttribute("data-theme")||"dark";p(e());const n=new MutationObserver((()=>p(e())));return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>n.disconnect()}),[]);const g={container:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb"},header:{backgroundColor:"#f3f4f6",borderBottom:"1px solid #e5e7eb"},filename:{color:"#1f2937"},icon:{color:"#4b5563"},copyButton:{color:"#4b5563",transition:"background-color 150ms ease-in-out",border:"none",cursor:"pointer",padding:"0.375rem",borderRadius:"0.375rem"},copyButtonHoverBg:"#e5e7eb",copyButtonHoverColor:"#1f2937",bashLineHoverBg:"rgba(229, 231, 235, 0.6)",syntaxTheme:a.A},h={container:{backgroundColor:"#1e1e1e",border:"1px solid #333333"},header:{backgroundColor:"#252526",borderBottom:"1px solid #333333"},filename:{color:"#cccccc"},icon:{color:"#cccccc"},copyButton:{color:"#cccccc",transition:"background-color 150ms ease-in-out",border:"none",cursor:"pointer",padding:"0.375rem",borderRadius:"0.375rem"},copyButtonHoverBg:"#3c3c3c",copyButtonHoverColor:"#ffffff",bashLineHoverBg:"rgba(55, 65, 81, 0.4)",syntaxTheme:i.A},y="dark"===m?h:g,x=y.syntaxTheme,f={container:{borderRadius:"0.5rem",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',margin:"1.5rem 0",overflow:"hidden"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem 1rem"},headerTextContainer:{display:"flex",alignItems:"center",gap:"0.5rem"},filename:{fontSize:"0.875rem"},syntaxHighlighter:{margin:0,padding:"1rem",fontSize:"0.9rem",lineHeight:"1.6"},bashLine:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem"}},b=(0,t.useMemo)((()=>{if("string"!=typeof n)return"";const e=n.replace(/\r\n/g,"\n").split("\n");return e.length>0&&""===e[0].trim()&&e.shift(),e.join("\n")}),[n]);if("bash"===r){const e=/^\s*(?:\xab[^\xbb]+\xbb\s*)?(\$)\s+/,n=n=>n.split("\n").filter((n=>e.test(n))).map((n=>{const r=n.match(e),t=n.indexOf(r[1]);return n.substring(t+1).trim()})).join("\n"),r=n=>{let{line:r}=n;const[a,i]=(0,t.useState)(!1),s=r.match(e),c=!!s;let l="";if(c){const e=r.indexOf(s[1]);l=r.substring(e+1).trim()}const m={...f.bashLine,backgroundColor:a?y.bashLineHoverBg:"transparent",minWidth:"max-content",width:"100%",position:"relative",paddingRight:"2rem"};return(0,d.jsxs)("div",{style:m,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,d.jsx)(o.A,{language:"bash",style:x,customStyle:{padding:0,margin:0,border:"none",borderRadius:0,background:"transparent",overflow:"visible",width:"auto",fontFamily:"inherit",fontSize:"0.9rem",lineHeight:"1.6"},children:r}),c&&(0,d.jsx)("div",{style:{position:"sticky",right:"1rem",display:"flex",alignItems:"center",height:"100%",opacity:a?1:0,transition:"opacity 150ms ease-in-out"},children:(0,d.jsx)(u,{textToCopy:l,themeStyles:y})})]})},a=x['pre[class*="language-"]']&&x['pre[class*="language-"]'].background||y.container.backgroundColor;return(0,d.jsxs)("div",{style:{...f.container,...y.container},children:[(0,d.jsxs)("div",{style:{...f.header,...y.header},children:[(0,d.jsxs)("div",{style:f.headerTextContainer,children:[(0,d.jsx)(l.A,{size:16,style:y.icon}),(0,d.jsx)("span",{style:{...f.filename,...y.filename},children:s||"bash"})]}),c&&(0,d.jsx)(u,{textToCopy:n(b),themeStyles:y})]}),(0,d.jsx)("div",{style:{backgroundColor:a,overflowX:"auto",padding:"1rem 0",width:"100%"},children:(0,d.jsx)("div",{style:{display:"table",width:"max-content",minWidth:"100%"},children:b.split("\n").map(((e,n)=>(0,d.jsx)(r,{line:e},n)))})})]})}return(0,d.jsxs)("div",{style:{...f.container,...y.container},children:[(0,d.jsxs)("div",{style:{...f.header,...y.header},children:[(0,d.jsx)("span",{style:{...f.filename,...y.filename},children:s||r}),c&&(0,d.jsx)(u,{textToCopy:b,themeStyles:y})]}),(0,d.jsx)(o.A,{language:"no"===r?"text":r,style:x,customStyle:f.syntaxHighlighter,wrapLines:!0,wrapLongLines:!0,children:b})]})}}}]);