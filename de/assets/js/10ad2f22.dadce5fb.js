"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[4183],{64340:(e,t,a)=>{a.d(t,{A:()=>z});var n=a(32607),s=a(58366),r=a(82524),i=a(57354),l=a(56428),o=a(553),c=a(44773),d=a(92936),u=a(93883),m=a(73715),f=a(96540),h=a(94335),x=a(44586);const p=()=>{const{siteConfig:{customFields:e}}=(0,x.A)();return(0,f.useMemo)((()=>{if(!e.apiURL)return null;return h.A.create({baseURL:`https://${e.apiURL}`,timeout:1e4,headers:{"Content-Type":"application/json"}})}),[e.apiURL])};var y=a(21312);const v={container:"container_rkdo",mainContent:"mainContent_BBg7",installSection:"installSection_CFHx",installContainer:"installContainer_WP6K",installContent:"installContent_aB0k",installTitle:"installTitle_B0oK",installIcon:"installIcon_iSrV",installValue:"installValue_aNFT",statsSection:"statsSection_afOt",statsRow:"statsRow_ZNRN",statCard:"statCard_4ZUD",statIcon:"statIcon_Pc9U",statContent:"statContent_BMaP",statTitle:"statTitle_ov7O",statValue:"statValue_NMH8",valueNumber:"valueNumber_bLgR",loadingSkeleton:"loadingSkeleton_xSym",categorySection:"categorySection_lenc",sectionTitle:"sectionTitle_YW5f",categoryGrid:"categoryGrid_pEB6",categoryCard:"categoryCard_kfue",categoryHeader:"categoryHeader_WE51",categoryName:"categoryName_MREH",categoryValue:"categoryValue_WQFM",categoryProgress:"categoryProgress_isn8",chartsSection:"chartsSection_XgAR",chartCard:"chartCard_UadO",chartContainer:"chartContainer_JZV3",chartTitle:"chartTitle_BJSE",chartWrapper:"chartWrapper_yIBc",chart:"chart_o9O0",emptyState:"emptyState_RTUX",emptyIcon:"emptyIcon_oAJ_",emptyText:"emptyText_LJAz",navigationDots:"navigationDots_xrba",dot:"dot_dx1I",activeDot:"activeDot_y0Ni",updateTime:"updateTime_wiB_","ant-col":"ant-col_ufWT"};var g=a(71717);const j="statCard_cpCp",_="statIcon_XEwX",A="statContent_Rh5E",N="statTitle_EbNT",T="statValue_Et2I",S="loadingSkeleton_SUjY",b="standaloneContainer_TeAm",w="flipCounter_mTTH",C="flipDigit_xxNe",D="flipCard_z_iV",I="flipping_fdIh",O="flipCardFront_giEi",E="flipCardBack_InnX";var M=a(74848);const k=e=>{let{digit:t}=e;const[a,n]=(0,f.useState)(t),[s,r]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{t!==a&&(r(!0),setTimeout((()=>{n(t),r(!1)}),300))}),[t,a]),(0,M.jsx)("div",{className:C,children:(0,M.jsxs)("div",{className:`${D} ${s?I:""}`,children:[(0,M.jsx)("div",{className:O,children:(0,M.jsx)("span",{children:a})}),(0,M.jsx)("div",{className:E,children:(0,M.jsx)("span",{children:t})})]})})},P=e=>{let{value:t,title:a,icon:n,color:s,loading:r,standalone:i=!1}=e;const[l,o]=(0,f.useState)(0),[c,d]=(0,f.useState)(!1),u=(0,f.useRef)(null);(0,f.useEffect)((()=>{if("undefined"==typeof window)return;const e=new IntersectionObserver((e=>{let[t]=e;t.isIntersecting&&d(!0)}),{threshold:.1});return u.current&&e.observe(u.current),()=>e.disconnect()}),[]),(0,f.useEffect)((()=>{if(c&&!r&&"number"==typeof t){const e=60,a=t/e;let n=0;const s=setInterval((()=>{n+=a,n>=t?(o(t),clearInterval(s)):o(Math.floor(n))}),2e3/e);return()=>clearInterval(s)}}),[c,t,r]);const h=(x=l,x.toString().padStart(6,"0")).split("");var x;return i?(0,M.jsx)("div",{className:b,ref:u,children:(0,M.jsx)("div",{className:w,children:h.map(((e,t)=>(0,M.jsx)(k,{digit:parseInt(e)},t)))})}):(0,M.jsxs)("div",{className:j,ref:u,"data-stat":a,children:[(0,M.jsx)("div",{className:_,style:{color:s},children:(0,M.jsx)(m.A,{})}),(0,M.jsxs)("div",{className:A,children:[(0,M.jsx)("h3",{className:N,children:a}),(0,M.jsx)("div",{className:T,children:r?(0,M.jsx)("div",{className:S}):(0,M.jsx)("div",{className:w,children:h.map(((e,t)=>(0,M.jsx)(k,{digit:parseInt(e)},t)))})})]})]})},L=["#4C78A8","#F58518","#54A24B","#E45756","#72B7B2","#B279A2","#FF9DA6","#9D755D"],R={NO_DATA:{id:"\u6682\u65e0\u6570\u636e",message:"\u6682\u65e0\u6570\u636e"},TOP_COMMANDS:{id:"\u6700\u5e38\u7528\u6307\u4ee4 Top Commands",message:"\u6700\u5e38\u7528\u6307\u4ee4"},TOP_PACKAGES:{id:"\u6700\u5e38\u7528\u5305 Top Packages",message:"\u6700\u5e38\u7528\u5305"},TOP_COMMANDS_TITLE:{id:"\u6700\u5e38\u7528\u6307\u4ee4",message:"\u6700\u5e38\u7528\u6307\u4ee4"},TOP_PACKAGES_TITLE:{id:"\u6700\u5e38\u7528\u5305",message:"\u6700\u5e38\u7528\u5305"},COMPONENT_DOWNLOADS:{id:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf",message:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf"},PM_DOWNLOADS:{id:"ruyi\u5305\u7ba1\u7406\u5668\u4e0b\u8f7d\u6b21\u6570",message:"ruyi\u5305\u7ba1\u7406\u5668\u4e0b\u8f7d\u6b21\u6570"},THIRD_PARTY:{id:"\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u4e0b\u8f7d\u6b21\u6570",message:"\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u4e0b\u8f7d\u6b21\u6570"},DOCS_DOWNLOADS:{id:"\u6587\u6863\u4e0b\u8f7d\u6570\u91cf",message:"\u6587\u6863\u4e0b\u8f7d\u6570\u91cf"},IDE_DOWNLOADS:{id:"IDE\u4e0b\u8f7d\u6b21\u6570",message:"IDE\u4e0b\u8f7d\u6b21\u6570"},RUYI_INSTALLS:{id:"ruyi\u5b89\u88c5\u53f0\u6570",message:"ruyi\u5b89\u88c5\u53f0\u6570"},RUYI_GITHUB_DOWNLOADS:{id:"ruyi\u5305\u7ba1\u7406\u5668github\u4e0b\u8f7d\u6570\u91cf",message:"Ruyi GitHub\u4e0b\u8f7d\u6570\u91cf"},DETAILED_STATS:{id:"\u8be6\u7ec6\u4e0b\u8f7d\u7edf\u8ba1",message:"\u8be6\u7ec6\u4e0b\u8f7d\u7edf\u8ba1"},UPDATE_TIME:{id:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4",message:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4"}},W={downloads:R.COMPONENT_DOWNLOADS,pm_downloads:R.PM_DOWNLOADS,"3rdparty":R.THIRD_PARTY,humans:R.DOCS_DOWNLOADS,ide:R.IDE_DOWNLOADS},U=()=>(0,M.jsxs)("div",{className:v.emptyState,children:[(0,M.jsx)(c.A,{className:v.emptyIcon}),(0,M.jsx)("p",{className:v.emptyText,children:(0,y.T)(R.NO_DATA)})]}),$=e=>{let{title:t,value:a,icon:n,color:s,loading:r}=e;const[i,l]=(0,f.useState)(0),{elementRef:o,isVisible:c}=function(e,t){void 0===t&&(t={threshold:.1});const a=(0,f.useRef)(null),[n,s]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{if("undefined"==typeof window)return;const n=new IntersectionObserver((t=>{let[a]=t;a.isIntersecting&&(s(!0),e?.(a))}),t);return a.current&&n.observe(a.current),()=>n.disconnect()}),[e,t]),{elementRef:a,isVisible:n}}();return(0,f.useEffect)((()=>{if(c&&!r&&"number"==typeof a){const e=a/60;let t=0;const n=setInterval((()=>{t+=e,t>=a?(l(a),clearInterval(n)):l(Math.floor(t))}),2e3/60);return()=>clearInterval(n)}}),[c,a,r]),(0,M.jsxs)("div",{className:v.statCard,ref:o,"data-stat":t,children:[(0,M.jsx)("div",{className:v.statIcon,style:{color:s},children:n}),(0,M.jsxs)("div",{className:v.statContent,children:[(0,M.jsx)("h3",{className:v.statTitle,children:t}),(0,M.jsx)("div",{className:v.statValue,children:r?(0,M.jsx)("div",{className:v.loadingSkeleton}):(0,M.jsx)("span",{className:v.valueNumber,children:"number"==typeof a?i.toLocaleString():a})})]})]})},B=e=>{let{data:t,title:a}=e;const n=(0,f.useRef)(),s=(0,f.useRef)(),r=(0,f.useMemo)((()=>Object.entries(t).map((e=>{let[t,{total:a}]=e;return{action:t,total:a,logTotal:Math.pow(a,.4)*(1+a/2e3)*.6}})).sort(((e,t)=>t.total-e.total)).slice(0,10)),[t]);return(0,f.useEffect)((()=>{if("undefined"==typeof window||!r.length||!n.current)return;s.current&&s.current.destroy();const e=new g.t1({container:n.current,autoFit:!0,events:{enabled:!1}});s.current=e,e.coordinate({transform:[{type:"transpose"}]}),e.interval().style({fill:(e,t)=>L[t%L.length]}).data(r).transform({type:"sortX",reverse:!0,by:"y"}).axis("x",{line:!1,title:!1,label:!1,tick:!1,grid:!1}).axis("y",{title:!1,line:!1,tick:!1,grid:!1}).encode("x","action").encode("y","logTotal").scale("y",{nice:!1,padding:.6,min:0,max:3.5*Math.max(...r.map((e=>e.logTotal))),tickCount:0}).scale("x",{padding:.6,tickCount:0}).style("maxWidth",200).label({text:"action",position:"top-left",fill:"#2E3A46",dy:-12,fontWeight:600,fontSize:12}).label({text:"total",position:"top-right",fill:"#2E3A46",dy:0,dx:-10,fontWeight:700,fontSize:13}).interaction({tooltip:{body:!1}}),e.interaction("view-scroll",!1),e.render()}),[r]),(0,M.jsxs)("div",{className:v.chartContainer,children:[(0,M.jsx)("h3",{className:v.chartTitle,children:a}),(0,M.jsx)("div",{className:v.chartWrapper,children:r.length?(0,M.jsx)("div",{ref:n,className:v.chart}):(0,M.jsx)(U,{})})]})},V=e=>{let{currentSlide:t,onDotClick:a,isMobile:n}=e;return n?(0,M.jsx)("div",{className:v.navigationDots,children:[0,1,2].map((e=>(0,M.jsx)("div",{onClick:()=>a(e),className:`${v.dot} ${t===e?v.activeDot:""}`},e)))}):null},F=e=>{let{totalInstalls:t,loading:a}=e;return(0,M.jsx)("div",{className:v.installSection,children:(0,M.jsx)("div",{className:v.installContainer,children:(0,M.jsxs)("div",{className:v.installContent,children:[(0,M.jsxs)("h2",{className:v.installTitle,children:[(0,M.jsx)("span",{className:v.installIcon,children:"\ud83d\udcbb"}),(0,y.T)(R.RUYI_INSTALLS)]}),(0,M.jsx)("div",{className:v.installValue,children:a?(0,M.jsx)("div",{className:v.loadingSkeleton}):(0,M.jsx)(P,{value:t,loading:a,standalone:!0})})]})})})},H=e=>{let{data:t,loading:a,isMobile:r}=e;const i=t?.installs?.total||0,l=t?.downloads?.total||0,o=t?.pm_downloads?.total||0;return(0,M.jsx)("div",{className:v.statsSection,children:(0,M.jsxs)(n.A,{gutter:[24,24],className:v.statsRow,children:[!r&&(0,M.jsx)(s.A,{xs:24,sm:12,lg:8,children:(0,M.jsx)($,{title:(0,y.T)(R.RUYI_INSTALLS),value:i,icon:(0,M.jsx)(d.A,{}),color:"#07a0cc",loading:a})}),(0,M.jsx)(s.A,{xs:24,sm:12,lg:r?12:8,children:(0,M.jsx)($,{title:(0,y.T)(R.RUYI_GITHUB_DOWNLOADS),value:o,icon:(0,M.jsx)(u.A,{}),color:"#07a0cc",loading:a})}),(0,M.jsx)(s.A,{xs:24,sm:12,lg:r?12:8,children:(0,M.jsx)($,{title:(0,y.T)(R.COMPONENT_DOWNLOADS),value:l,icon:(0,M.jsx)(m.A,{}),color:"#07a0cc",loading:a})})]})})},K=e=>{let{data:t}=e;const a=(e=>{if(!e)return{};const t={};return Object.entries(e.other_categories_downloads||{}).forEach((e=>{let[a,n]=e;t[(0,y.T)(W[a])]={...n}})),e.downloads&&(t[(0,y.T)(W.downloads)]={...e.downloads}),e.pm_downloads&&(t[(0,y.T)(W.pm_downloads)]={...e.pm_downloads}),t})(t),n=Math.max(...Object.values(a).map((e=>e.total)),0);return(0,M.jsxs)("div",{className:v.categorySection,children:[(0,M.jsx)("h3",{className:v.sectionTitle,children:(0,y.T)(R.DETAILED_STATS)}),(0,M.jsx)("div",{className:v.categoryGrid,children:Object.entries(a).map((e=>{let[t,a]=e;const s=Math.log10(a.total+1),i=Math.min(a.total/1e4,.3),l=s*(1+i),o=Math.max(l,.1),c=Math.log10(n+1)*(1+Math.min(n/1e4,.3)),d=c>0?o/c*100:10;return console.log(`${t}: \u539f\u59cb\u503c=${a.total}, \u5bf9\u6570=${s.toFixed(2)}, \u7ebf\u6027\u56e0\u5b50=${i.toFixed(2)}, \u8ba1\u7b97\u503c=${l.toFixed(2)}, \u8c03\u6574\u503c=${o.toFixed(2)}, \u767e\u5206\u6bd4=${d.toFixed(2)}%`),(0,M.jsxs)("div",{className:v.categoryCard,children:[(0,M.jsxs)("div",{className:v.categoryHeader,children:[(0,M.jsx)("span",{className:v.categoryName,children:t}),(0,M.jsx)("span",{className:v.categoryValue,children:a.total.toLocaleString()})]}),(0,M.jsx)(r.A,{percent:d,showInfo:!1,strokeColor:"#07a0cc",className:v.categoryProgress})]},t)}))})]})},G=e=>{let{data:t}=e;const a=[{key:"1",label:(0,y.T)(R.TOP_COMMANDS),children:(0,M.jsx)(B,{data:t?.top_commands||{},title:(0,y.T)(R.TOP_COMMANDS_TITLE)})}],r=[{key:"1",label:(0,y.T)(R.TOP_PACKAGES),children:(0,M.jsx)(B,{data:t?.top_packages||{},title:(0,y.T)(R.TOP_PACKAGES_TITLE)})}];return(0,M.jsx)("div",{className:v.chartsSection,children:(0,M.jsxs)(n.A,{gutter:[24,24],children:[(0,M.jsx)(s.A,{xs:24,lg:12,children:(0,M.jsx)(i.A,{className:v.chartCard,children:(0,M.jsx)(l.A,{defaultActiveKey:"1",items:a})})}),(0,M.jsx)(s.A,{xs:24,lg:12,children:(0,M.jsx)(i.A,{className:v.chartCard,children:(0,M.jsx)(l.A,{defaultActiveKey:"1",items:r})})})]})})},Y=e=>{let{data:t}=e;return(0,M.jsx)("div",{className:v.updateTime,children:(0,M.jsxs)("p",{children:[(0,y.T)(R.UPDATE_TIME),": ",String(t.last_updated).slice(0,16).replace("T"," ")]})})},z=()=>{const e=p(),[t,a]=(0,f.useState)(null),[n,s]=(0,f.useState)(null),[r,i]=(0,f.useState)(!0),l=(0,f.useRef)(),c=(0,f.useRef)(null),[d,u]=(0,f.useState)(!0),[m,h]=(0,f.useState)(0),[x,y]=(0,f.useState)(!1),g=(0,f.useRef)(null),j=(()=>{const[e,t]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>t(window.matchMedia("(max-width: 1024px)").matches);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e})();(0,f.useEffect)((()=>{if("undefined"==typeof window)return;const e=l.current,t=()=>{if(e){const t=e.scrollTop,a=Math.round(t/window.innerHeight);h(a)}};return e?.addEventListener("scroll",t),()=>e?.removeEventListener("scroll",t)}),[]),(0,f.useEffect)((()=>{if("undefined"==typeof window||"undefined"==typeof IntersectionObserver)return;const e=document.querySelector("footer");if(e){c.current=e;const t=new IntersectionObserver((e=>{e.forEach((e=>u(e.isIntersecting)))}),{threshold:[0]});return t.observe(e),()=>t.disconnect()}}),[]),(0,f.useEffect)((()=>{if("undefined"==typeof window)return;const e=e=>{x||d||!j||("ArrowDown"===e.key||"PageDown"===e.key?(e.preventDefault(),_(Math.min(2,m+1))):"ArrowUp"!==e.key&&"PageUp"!==e.key||(e.preventDefault(),_(Math.max(0,m-1))))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e),clearTimeout(g.current)}}),[x,m,d,j]),(0,f.useEffect)((()=>{if(!e)return;let t=null,r=0;const l=async()=>{if(!(r>5))try{i(!0);const t=await e.post("/fe/dashboard",{});a(t.data),s(null)}catch(n){s(n),t=setTimeout(l,1e3*Math.pow(2,r)),r++}finally{i(!1)}};if("requestIdleCallback"in window){const e=requestIdleCallback(l);return()=>{cancelIdleCallback(e),clearTimeout(t)}}return t=setTimeout(l,500),()=>clearTimeout(t)}),[e]);const _=e=>{!l.current||x||d||(y(!0),l.current.scrollTo({top:e*window.innerHeight,behavior:"smooth"}),g.current=setTimeout((()=>y(!1)),500))},A=t?.installs?.total||0;return(0,M.jsxs)("div",{ref:l,className:v.container,style:{pointerEvents:d&&j?"none":"auto"},children:[(0,M.jsx)(V,{currentSlide:m,onDotClick:_,isMobile:j}),(0,M.jsx)("div",{className:v.backgroundHeader}),(0,M.jsxs)("div",{className:v.animationContainer,"aria-hidden":"true",children:[(0,M.jsx)("div",{className:`${v.blob} ${v.blob1}`}),(0,M.jsx)("div",{className:`${v.blob} ${v.blob2}`}),(0,M.jsx)("div",{className:`${v.blob} ${v.blob3}`})]}),(0,M.jsx)(o.Ay,{renderEmpty:U,theme:{components:{Tabs:{itemSelectedColor:"#0A2C7E",inkBarColor:"#F9C23C"},Card:{borderRadius:12,boxShadow:"0 8px 24px rgba(16, 24, 40, 0.06)",borderColor:"rgba(16, 24, 40, 0.04)"}}},children:(0,M.jsxs)("div",{className:v.mainContent,children:[j&&(0,M.jsx)(F,{totalInstalls:A,loading:r}),(0,M.jsx)(H,{data:t,loading:r,isMobile:j}),t&&(0,M.jsx)(K,{data:t}),(0,M.jsx)(G,{data:t}),t&&(0,M.jsx)(Y,{data:t})]})})]})}},23474:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});a(96540);var n=a(31023),s=a(64340),r=a(21312);const i="container_qKy1",l="header_QkRw",o="title_rVeO",c="content_J2EP";var d=a(74848);const u=()=>(0,d.jsx)(n.A,{title:"Data Panel",description:"RuyiSDK Data Panel",children:(0,d.jsxs)("div",{className:i,children:[(0,d.jsx)("div",{className:l,children:(0,d.jsx)("h1",{className:o,children:(0,r.T)({id:"RuyiSDK \u6570\u636e\u7edf\u8ba1",message:"RuyiSDK \u6570\u636e\u7edf\u8ba1"})})}),(0,d.jsx)("div",{className:c,children:(0,d.jsx)(s.A,{})})]})})},43145:(e,t,a)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}a.d(t,{A:()=>n})},64467:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(98406);function s(e,t,a){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},73893:(e,t,a)=>{function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a.d(t,{A:()=>n})},80045:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(98587);function s(e,t){if(null==e)return{};var a,s,r=(0,n.A)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},38339:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(43145);var s=a(73893),r=a(27800);function i(e){return function(e){if(Array.isArray(e))return(0,n.A)(e)}(e)||(0,s.A)(e)||(0,r.A)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},98406:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(82284);function s(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=(0,n.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}},82284:(e,t,a)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}a.d(t,{A:()=>n})},27800:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(43145);function s(e,t){if(e){if("string"==typeof e)return(0,n.A)(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,n.A)(e,t):void 0}}}}]);