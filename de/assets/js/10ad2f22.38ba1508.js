"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[4183],{52110:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(96540),o=n(31023),r=n(99529),l=n(56952),i=n(72431),a=n(14616),d=n(44773),c=n(22001),h=n(94335),u=n(44586);const m=()=>{const{siteConfig:{customFields:e}}=(0,u.A)();return(0,s.useMemo)((()=>{if(!e.apiURL)return null;return h.A.create({baseURL:`https://${e.apiURL}`,timeout:1e4,headers:{"Content-Type":"application/json"}})}),[e.apiURL])};var p=n(21312);const f="container_rkdo",y="card_GzLU";var g=n(43472),x=n(74848);const v=()=>(0,x.jsxs)("div",{style:{textAlign:"center",height:"20rem"},children:[(0,x.jsx)(d.A,{style:{fontSize:"2rem",color:"black",marginTop:"1rem"}}),(0,x.jsx)("p",{style:{color:"black"},children:(0,p.T)({id:"\u6682\u65e0\u6570\u636e",message:"\u6682\u65e0\u6570\u636e"})})]}),w=e=>{let{data:t}=e;const n=(0,s.useRef)(),o=(0,s.useRef)(),r=(0,s.useMemo)((()=>Object.entries(t).map((e=>{let[t,{total:n}]=e;return{action:t,total:n}}))),[t]);return(0,s.useEffect)((()=>{if(r.length&&n.current){o.current&&o.current.destroy();const e=new g.t1({container:n.current,autoFit:!0,events:{enabled:!1}});o.current=e;const t=Math.max(...r.map((e=>e.total)),0);e.coordinate({transform:[{type:"transpose"}]}),e.interval().style({fill:"#0d4977"}).data(r).transform({type:"sortX",reverse:!0,by:"y"}).axis("x",{line:!1,title:!1,label:!1,tick:!1}).axis("y",{title:!1,line:!1,tick:!1}).encode("x","action").encode("y","total").scale("x",{padding:.6}).style("maxWidth",200).label({text:"action",position:"top-left",fill:"#000",dy:-22,fontWeight:600}).label({text:"total",position:e=>e.total>.1*t?"left":"right",fill:e=>e.total>.1*t?"white":"#333",dx:5,fontWeight:600}).interaction({tooltip:{body:!1}}),e.interaction("view-scroll",!1),e.render()}}),[r]),(0,x.jsxs)("div",{className:"custom-scroll",style:{height:"75vh",overflow:"auto",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",msOverflowStyle:"none",scrollbarWidth:"none"},children:[(0,x.jsx)("style",{jsx:!0,children:".custom-scroll::-webkit-scrollbar { display: none; }"}),r.length?(0,x.jsx)("div",{ref:n,style:{width:"100%",height:"70vh",touchAction:"pan-y",position:"relative"},children:(0,x.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0}})}):(0,x.jsx)("div",{style:{width:"100%",height:"70vh"},children:(0,x.jsx)(v,{})})]})},j=()=>{const e=m(),[t,n]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),h=(0,s.useRef)(),u=(0,s.useRef)(null),[g,j]=(0,s.useState)(!0),[b,k]=(0,s.useState)(0),[T,S]=(0,s.useState)(!1),A=(0,s.useRef)(null),[E,R]=(0,s.useState)(!1),_=[{key:"1",label:(0,p.T)({id:"\u6700\u5e38\u7528\u6307\u4ee4 Top Commands",message:"\u6700\u5e38\u7528\u6307\u4ee4"}),children:(0,x.jsx)(w,{data:t?.top_commands||{}})}],C=[{key:"1",label:(0,p.T)({id:"\u6700\u5e38\u7528\u5305 Top Packages",message:"\u6700\u5e38\u7528\u5305"}),children:(0,x.jsx)(w,{data:t?.top_packages||{}})}];(0,s.useEffect)((()=>{const e=()=>R(window.matchMedia("(max-width: 1024px)").matches);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{const e=h.current,t=()=>{if(e){const t=e.scrollTop,n=Math.round(t/window.innerHeight);k(n)}};return e?.addEventListener("scroll",t),()=>e?.removeEventListener("scroll",t)}),[]),(0,s.useEffect)((()=>{if("undefined"==typeof IntersectionObserver)return;const e=document.querySelector("footer");if(e){u.current=e;const t=new IntersectionObserver((e=>{e.forEach((e=>j(e.isIntersecting)))}),{threshold:[0]});return t.observe(e),()=>t.disconnect()}}),[]);const z=e=>{!h.current||T||g||(S(!0),h.current.scrollTo({top:e*window.innerHeight,behavior:"smooth"}),A.current=setTimeout((()=>S(!1)),500))};(0,s.useEffect)((()=>{const e=e=>{T||g||!E||("ArrowDown"===e.key||"PageDown"===e.key?(e.preventDefault(),z(Math.min(2,b+1))):"ArrowUp"!==e.key&&"PageUp"!==e.key||(e.preventDefault(),z(Math.max(0,b-1))))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e),clearTimeout(A.current)}}),[T,b,g,E]),(0,s.useEffect)((()=>{if(!e)return;let t=null,s=0;const r=async()=>{if(!(s>5))try{n((await e.post("/fe/dashboard",{})).data),d(null)}catch(o){d(o),t=setTimeout(r,2**s*1e3),s++}};if("requestIdleCallback"in window){const e=requestIdleCallback(r);return()=>{cancelIdleCallback(e),clearTimeout(t)}}return t=setTimeout(r,500),()=>clearTimeout(t)}),[e]);const D=()=>E?(0,x.jsx)("div",{style:{position:"fixed",right:"20px",top:"50%",transform:"translateY(-50%)",display:"flex",flexDirection:"column",gap:"10px",zIndex:100},children:[0,1,2].map((e=>(0,x.jsx)("div",{onClick:()=>z(e),style:{width:"12px",height:"12px",borderRadius:"50%",background:b===e?"#fff":"rgba(255,255,255,0.5)",cursor:g?"default":"pointer"}},e)))}):null;return(0,x.jsxs)("div",{ref:h,className:f,style:{pointerEvents:g&&E?"none":"auto"},children:[(0,x.jsx)(D,{}),(0,x.jsxs)(r.Ay,{renderEmpty:v,theme:{components:{Tabs:{itemSelectedColor:"#0d4977",inkBarColor:"#0d4977"}}},children:[(0,x.jsx)("div",{className:`${y}`,children:(0,x.jsxs)(l.A,{style:{width:"90%",height:"90vh",backgroundColor:"rgba(0,0,0,0)",border:"none",margin:"0 auto"},children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{style:{color:"#e3e3e3",marginTop:"2rem"},children:(0,p.T)({id:"RuyiSDK \u6570\u636e\u603b\u89c8",message:"RuyiSDK \u6570\u636e\u603b\u89c8"})}),(0,x.jsx)(i.A,{title:(0,x.jsx)("span",{style:{color:"#e3e3e3",fontSize:"1.5rem",fontWeight:"bold"},children:(0,p.T)({id:"\u4e0b\u8f7d\u6570\u91cf Downloads",message:"\u7ec4\u4ef6\u4e0b\u8f7d\u6570\u91cf"})}),value:null!=t?.downloads?.total&&null!=t?.pm_downloads?.total?t.downloads.total+t.pm_downloads.total:(0,p.T)({id:"\u8f7d\u5165\u4e2d",message:"\u8f7d\u5165\u4e2d"})+"...",valueStyle:{color:"#e3e3e3",fontSize:"3rem"},style:{marginTop:"2rem"}}),(0,x.jsx)(i.A,{title:(0,x.jsx)("span",{style:{color:"#e3e3e3",fontSize:"1.5rem",fontWeight:"bold"},children:(0,p.T)({id:"\u5b89\u88c5\u53f0\u6570 Installs",message:"\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u53f0\u6570"})}),value:t?.installs?.total||(0,p.T)({id:"\u8f7d\u5165\u4e2d",message:"\u8f7d\u5165\u4e2d"})+"...",valueStyle:{color:"#e3e3e3",fontSize:"3rem"}})]}),t&&(0,x.jsxs)("div",{style:{marginTop:"2.5rem",background:"rgba(255,255,255,0.04)",borderRadius:8,padding:"1.5rem 2rem"},children:[(0,x.jsx)("h2",{style:{color:"#e3e3e3",fontSize:"1.2rem",fontWeight:600,marginBottom:"1rem"},children:(0,p.T)({id:"\u5206\u76ee\u5f55\u7684\u4e0b\u8f7d\u6570\u91cf",message:"\u5206\u76ee\u5f55\u7684\u4e0b\u8f7d\u6570\u91cf"})}),(0,x.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:Object.entries((e=>{if(!e)return{};const t={downloads:"\u7ec4\u4ef6\u4e0b\u8f7d\u91cf",pm_downloads:"\u5305\u7ba1\u7406\u5668\u4e0b\u8f7d\u91cf","3rdparty":"\u7b2c\u4e09\u65b9\u4e0b\u8f7d\u91cf",humans:"\u6587\u6863\u7b49",ide:"IDE\u4e0b\u8f7d\u6b21\u6570"},n={};return Object.entries(e.other_categories_downloads||{}).forEach((e=>{let[s,o]=e;n[t[s]]={...o}})),e.downloads&&(n[t.downloads]={...e.downloads}),e.pm_downloads&&(n[t.pm_downloads]={...e.pm_downloads}),n})(t)).map((e=>{let[t,n]=e;return(0,x.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid #2222"},children:[(0,x.jsx)("span",{style:{color:"#e3e3e3",fontWeight:500},children:t}),(0,x.jsx)("span",{style:{color:"#e3e3e3",fontWeight:700},children:n.total})]},t)}))})]}),t&&(0,x.jsxs)("p",{style:{marginTop:"4rem",color:"#d1d1d1",fontSize:"0.8rem"},children:[(0,p.T)({id:"\u6700\u540e\u66f4\u65b0\u65f6\u95f4",message:"\u6570\u636e\u66f4\u65b0\u65f6\u95f4"}),":",String(t.last_updated).slice(0,16).replace("T"," ")]})]})}),(0,x.jsx)("div",{className:`${y}`,children:(0,x.jsx)(l.A,{style:{width:"80%",height:"75vh",border:"none",marginTop:"1rem"},children:(0,x.jsx)(a.A,{defaultActiveKey:"1",items:_,style:{width:"100%",height:"90vh"},more:{icon:(0,x.jsx)(c.A,{}),trigger:"click"}})})}),(0,x.jsx)("div",{className:`${y}`,children:(0,x.jsx)(l.A,{style:{width:"80%",height:"75vh",border:"none",marginTop:"1rem"},children:(0,x.jsx)(a.A,{defaultActiveKey:"1",items:C,style:{width:"100%",height:"90vh"},more:{icon:(0,x.jsx)(c.A,{}),trigger:"click"}})})})]})]})},b="container_qKy1",k=()=>(0,x.jsx)(o.A,{title:"Data Panel",description:"RuyiSDK Data Panel",children:(0,x.jsx)("div",{className:b,children:(0,x.jsx)(j,{})})})}}]);