"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[335],{89981:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var i=r(74848),s=r(28453),t=r(60854);const a={sidebar_position:1},o="Verwendung der Ruyi-Compilerumgebung (am Beispiel von Licheepi 4A)",l={id:"Package-Manager/cases/case1",title:"Verwendung der Ruyi-Compilerumgebung (am Beispiel von Licheepi 4A)",description:"Anhand des Open-Source-Benchmarkprogramms Coremark wird der Prozess vom Installieren \xfcber den ruyi-Paketmanager bis hin zum Aufbau einer RISC-V-Compiler- und Simulationsumgebung demonstriert. Dabei wird der Quellcode von Coremark lokal kompiliert und auf dem Licheepi 4A-Entwicklungsboard ausgef\xfchrt.",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/Package-Manager/cases/case1.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case1",permalink:"/docs/de/docs/Package-Manager/cases/case1",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528\u6848\u4f8b",permalink:"/docs/de/docs/category/\u4f7f\u7528\u6848\u4f8b"},next:{title:"Verwendung der vom Anbieter ver\xf6ffentlichten Bin\xe4r-Toolchain zum Bauen (am Beispiel von MilkV Duo)",permalink:"/docs/de/docs/Package-Manager/cases/case2"}},d={},c=[{value:"Umgebungsbeschreibung",id:"umgebungsbeschreibung",level:2},{value:"Installation des ruyi-Paketmanagers",id:"installation-des-ruyi-paketmanagers",level:2},{value:"Bereitstellung der Entwicklungsumgebung mit dem ruyi-Paketmanager:",id:"bereitstellung-der-entwicklungsumgebung-mit-dem-ruyi-paketmanager",level:2},{value:"Cross-Kompilierung von Coremark",id:"cross-kompilierung-von-coremark",level:2},{value:"Ausf\xfchrungsvalidierung",id:"ausf\xfchrungsvalidierung",level:2}];function u(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"verwendung-der-ruyi-compilerumgebung-am-beispiel-von-licheepi-4a",children:"Verwendung der Ruyi-Compilerumgebung (am Beispiel von Licheepi 4A)"}),"\n",(0,i.jsx)(n.p,{children:"Anhand des Open-Source-Benchmarkprogramms Coremark wird der Prozess vom Installieren \xfcber den ruyi-Paketmanager bis hin zum Aufbau einer RISC-V-Compiler- und Simulationsumgebung demonstriert. Dabei wird der Quellcode von Coremark lokal kompiliert und auf dem Licheepi 4A-Entwicklungsboard ausgef\xfchrt."}),"\n",(0,i.jsx)(n.h2,{id:"umgebungsbeschreibung",children:"Umgebungsbeschreibung"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hardware-Umgebung: Licheepi 4A Entwicklungsboard (th1520)"}),"\n",(0,i.jsx)(n.li,{children:"Software-Umgebung: Debian/openEuler f\xfcr RISC-V"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation-des-ruyi-paketmanagers",children:"Installation des ruyi-Paketmanagers"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"[Optional] Entfernen Sie den derzeit installierten ruyi-Paketmanager sowie alle zugeh\xf6rigen Daten."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nruyi self uninstall --purge\n"}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Laden Sie das ",(0,i.jsx)(n.code,{children:"ruyi"}),"-Tool herunter, gew\xe4hren Sie ihm Ausf\xfchrungsrechte und f\xfcgen Sie es der Umgebungsvariable hinzu: Laden Sie das neueste ",(0,i.jsx)(n.code,{children:"ruyi"}),"-Tool von ",(0,i.jsx)(n.a,{href:"https://github.com/RuyiSDK/ruyi/releases/",children:"ruyi GitHub Releases"})," oder dem ",(0,i.jsx)(n.a,{href:"https://mirror.iscas.ac.cn/RuyiSDK/ruyi/releases/",children:"ISCAS-Mirrorsource"})," herunter."]}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\n# Laden Sie die riscv64-Version des ruyi-Paketmanagers herunter, legen Sie sie im PATH ab und gew\xe4hren Sie ihr Ausf\xfchrungsrechte\nwget https://github.com/ruyisdk/ruyi/releases/download/0.25.0/ruyi-0.25.0.riscv64\nsudo cp ruyi-0.25.0.riscv64 /usr/local/bin/ruyi\nsudo chmod +x ruyi\ncd\n"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie, ob der ruyi-Paketmanager verwendet werden kann."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nruyi --version\n"}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Aktualisieren Sie den Index der Softwarequellen."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nruyi update\n"}),"\n",(0,i.jsx)(n.h2,{id:"bereitstellung-der-entwicklungsumgebung-mit-dem-ruyi-paketmanager",children:"Bereitstellung der Entwicklungsumgebung mit dem ruyi-Paketmanager:"}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie die Paketindexinformationen des Softwarerepositories."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nruyi list\n"}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsxs)(n.li,{children:["Installieren Sie gnu: ruyi install ",(0,i.jsx)(n.code,{children:"<package-name>"})]}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\n# Installieren der f\xfcr Licheepi 4A geeigneten Compiler-Toolchain gnu-plct-xthead \nruyi install gnu-plct-xthead\n"}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie die vordefinierten Compilerumgebungen."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nruyi list profiles\n"}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsxs)(n.li,{children:["Erstellen Sie die ruyi-Virtual Environment venv-sipeed mit dem angegebenen Toolchain- und Emulator-Konfigurations.","\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Beachten Sie, dass beim Erstellen der virtuellen Umgebung die korrekte Compiler-Version und Sysroot-Art ausgew\xe4hlt werden muss.\nWenn keine Versionsnummer angegeben wird, wird standardm\xe4\xdfig die neueste Version aus den Softwarequellen verwendet, nicht die lokal installierte Version."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nruyi venv -h\n\n# Erstellen der virtuellen Umgebung venv-sipeed\nruyi venv -t gnu-plct-xthead sipeed-lpi4a venv-sipeed \n\n# \xdcberpr\xfcfen der Tools in der Compilerumgebung\nls venv-sipeed/bin/ \n\n# Aktivieren der virtuellen Umgebung (die virtuelle Umgebung kann als ein Container verstanden werden, der eine Isolierung der Laufzeitumgebung erm\xf6glicht. Nach der Aktivierung wird in der venv-sipeed-Umgebung die Toolchain der Version gnu-plct-xthead genutzt. Alternativ kann auch eine Umgebungsvariable f\xfcr /home/sipeed/.local/share/ruyi/binaries/riscv64/gnu-plct-xthead-2.8.0-ruyi.20240222/bin konfiguriert werden, um gcc direkt zu verwenden.)\n. venv-sipeed/bin/ruyi-activate \n\n# \xdcberpr\xfcfen, ob gcc in der aktuellen virtuellen Umgebung verf\xfcgbar ist\n\xabRuyi venv-sipeed\xbb sipeed@lpi4a1590:~$ riscv64-plctxthead-linux-gnu-gcc --version\n"}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsx)(n.li,{children:"Laden Sie den Quellcode von Coremark herunter und extrahieren Sie ihn, um ein Kompilierungsziel zu erhalten."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nmkdir coremark && cd coremark\nruyi extract coremark\nls -al\n"}),"\n",(0,i.jsx)(n.h2,{id:"cross-kompilierung-von-coremark",children:"Cross-Kompilierung von Coremark"}),"\n",(0,i.jsxs)(n.ol,{start:"10",children:["\n",(0,i.jsx)(n.li,{children:"Stellen Sie die Kompilierungskonfiguration im Coremark-Quellcode ein (siehe README-Dokument des Coremark-Repositories)."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nsed -i 's/\\bgcc\\b/riscv64-plctxthead-linux-gnu-gcc/g' linux64/core_portme.mak\n"}),"\n",(0,i.jsxs)(n.ol,{start:"11",children:["\n",(0,i.jsx)(n.li,{children:"F\xfchren Sie die Cross-Kompilierung und den Aufbau durch, um das ausf\xfchrbare Programm coremark.exe zu erhalten."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nmake PORT_DIR=linux64 link\nls -al    # das neue ausf\xfchrbare Programm coremark.exe\n"}),"\n",(0,i.jsxs)(n.ol,{start:"12",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie die Eigenschaften des riscv64-executables."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\nfile coremark.exe\n# Die R\xfcckgabe der Befehle zeigt architekturspezifische Informationen der Datei an\n"}),"\n",(0,i.jsx)(n.h2,{id:"ausf\xfchrungsvalidierung",children:"Ausf\xfchrungsvalidierung"}),"\n",(0,i.jsxs)(n.ol,{start:"13",children:["\n",(0,i.jsx)(n.li,{children:"F\xfchren Sie das riscv64 coremark-executable direkt aus."}),"\n"]}),"\n",(0,i.jsx)(t.A,{lang:"bash",code:"\n./coremark.exe\n"})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},60854:(e,n,r)=>{r.d(n,{A:()=>g});var i=r(96540),s=r(26348),t=r(19337),a=r(30222),o=r(45773),l=r(35404),d=r(96813),c=r(74848);const u=e=>{let{textToCopy:n,themeStyles:r}=e;const[s,t]=(0,i.useState)(!1),[a,d]=(0,i.useState)(!1),u={...r.copyButton,backgroundColor:a?r.copyButtonHoverBg:"transparent",color:a?r.copyButtonHoverColor:r.copyButton.color};return(0,c.jsx)("button",{onClick:()=>{n&&navigator.clipboard.writeText(n).then((()=>{t(!0),setTimeout((()=>t(!1)),2e3)})).catch((e=>{console.error("Failed to copy text: ",e);try{const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),t(!0),setTimeout((()=>t(!1)),2e3)}catch(r){console.error("Fallback copy method failed: ",r)}}))},style:u,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),"aria-label":"Copy code",children:s?(0,c.jsx)(o.A,{size:16,style:{color:"#4ade80"}}):(0,c.jsx)(l.A,{size:16})})},g=e=>{let{code:n="",lang:r="no",filename:o,showTitleCopyButton:l="bash"!==r}=e;const[g,m]=(0,i.useState)("dark");(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>document.documentElement.getAttribute("data-theme")||"dark";m(e());const n=new MutationObserver((()=>m(e())));return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>n.disconnect()}),[]);const h={container:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb"},header:{backgroundColor:"#f3f4f6",borderBottom:"1px solid #e5e7eb"},filename:{color:"#1f2937"},icon:{color:"#4b5563"},copyButton:{color:"#4b5563",transition:"background-color 150ms ease-in-out",border:"none",cursor:"pointer",padding:"0.375rem",borderRadius:"0.375rem"},copyButtonHoverBg:"#e5e7eb",copyButtonHoverColor:"#1f2937",bashLineHoverBg:"rgba(229, 231, 235, 0.6)",syntaxTheme:t.A},p={container:{backgroundColor:"#1e1e1e",border:"1px solid #333333"},header:{backgroundColor:"#252526",borderBottom:"1px solid #333333"},filename:{color:"#cccccc"},icon:{color:"#cccccc"},copyButton:{color:"#cccccc",transition:"background-color 150ms ease-in-out",border:"none",cursor:"pointer",padding:"0.375rem",borderRadius:"0.375rem"},copyButtonHoverBg:"#3c3c3c",copyButtonHoverColor:"#ffffff",bashLineHoverBg:"rgba(55, 65, 81, 0.4)",syntaxTheme:a.A},b="dark"===g?p:h,x=b.syntaxTheme,y={container:{borderRadius:"0.5rem",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',margin:"1.5rem 0",overflow:"hidden"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem 1rem"},headerTextContainer:{display:"flex",alignItems:"center",gap:"0.5rem"},filename:{fontSize:"0.875rem"},syntaxHighlighter:{margin:0,padding:"1rem",fontSize:"0.9rem",lineHeight:"1.6"},bashLine:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem"}},f=(0,i.useMemo)((()=>{if("string"!=typeof n)return"";const e=n.replace(/\r\n/g,"\n").split("\n");return e.length>0&&""===e[0].trim()&&e.shift(),e.join("\n")}),[n]);if("bash"===r){const e=/^\s*(?:\xab[^\xbb]+\xbb\s*)?(\$)\s+/,n=n=>n.split("\n").filter((n=>e.test(n))).map((n=>{const r=n.match(e),i=n.indexOf(r[1]);return n.substring(i+1).trim()})).join("\n"),r=n=>{let{line:r}=n;const[t,a]=(0,i.useState)(!1),o=r.match(e),l=!!o;let d="";if(l){const e=r.indexOf(o[1]);d=r.substring(e+1).trim()}const g={...y.bashLine,backgroundColor:t?b.bashLineHoverBg:"transparent",minWidth:"max-content",width:"100%",position:"relative",paddingRight:"2rem"};return(0,c.jsxs)("div",{style:g,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[(0,c.jsx)(s.A,{language:"bash",style:x,customStyle:{padding:0,margin:0,border:"none",borderRadius:0,background:"transparent",overflow:"visible",width:"auto",fontFamily:"inherit",fontSize:"0.9rem",lineHeight:"1.6"},children:r}),l&&(0,c.jsx)("div",{style:{position:"sticky",right:"1rem",display:"flex",alignItems:"center",height:"100%",opacity:t?1:0,transition:"opacity 150ms ease-in-out"},children:(0,c.jsx)(u,{textToCopy:d,themeStyles:b})})]})},t=x['pre[class*="language-"]']&&x['pre[class*="language-"]'].background||b.container.backgroundColor;return(0,c.jsxs)("div",{style:{...y.container,...b.container},children:[(0,c.jsxs)("div",{style:{...y.header,...b.header},children:[(0,c.jsxs)("div",{style:y.headerTextContainer,children:[(0,c.jsx)(d.A,{size:16,style:b.icon}),(0,c.jsx)("span",{style:{...y.filename,...b.filename},children:o||"bash"})]}),l&&(0,c.jsx)(u,{textToCopy:n(f),themeStyles:b})]}),(0,c.jsx)("div",{style:{backgroundColor:t,overflowX:"auto",padding:"1rem 0",width:"100%"},children:(0,c.jsx)("div",{style:{display:"table",width:"max-content",minWidth:"100%"},children:f.split("\n").map(((e,n)=>(0,c.jsx)(r,{line:e},n)))})})]})}return(0,c.jsxs)("div",{style:{...y.container,...b.container},children:[(0,c.jsxs)("div",{style:{...y.header,...b.header},children:[(0,c.jsx)("span",{style:{...y.filename,...b.filename},children:o||r}),l&&(0,c.jsx)(u,{textToCopy:f,themeStyles:b})]}),(0,c.jsx)(s.A,{language:"no"===r?"text":r,style:x,customStyle:y.syntaxHighlighter,wrapLines:!0,wrapLongLines:!0,children:f})]})}}}]);