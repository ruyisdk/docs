"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[335],{9981:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>o,frontMatter:()=>a,metadata:()=>d,toc:()=>t});var i=r(4848),s=r(8453);const a={sidebar_position:1},l="Verwendung der Ruyi-Compilerumgebung (am Beispiel von Licheepi 4A)",d={id:"Package-Manager/cases/case1",title:"Verwendung der Ruyi-Compilerumgebung (am Beispiel von Licheepi 4A)",description:"Anhand des Open-Source-Benchmarkprogramms Coremark wird der Prozess vom Installieren \xfcber den ruyi-Paketmanager bis hin zum Aufbau einer RISC-V-Compiler- und Simulationsumgebung demonstriert. Dabei wird der Quellcode von Coremark lokal kompiliert und auf dem Licheepi 4A-Entwicklungsboard ausgef\xfchrt.",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/Package-Manager/cases/case1.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case1",permalink:"/docs/de/docs/Package-Manager/cases/case1",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528\u6848\u4f8b",permalink:"/docs/de/docs/category/\u4f7f\u7528\u6848\u4f8b"},next:{title:"Verwendung der vom Anbieter ver\xf6ffentlichten Bin\xe4r-Toolchain zum Bauen (am Beispiel von MilkV Duo)",permalink:"/docs/de/docs/Package-Manager/cases/case2"}},u={},t=[{value:"Umgebungsbeschreibung",id:"umgebungsbeschreibung",level:2},{value:"Installation des ruyi-Paketmanagers",id:"installation-des-ruyi-paketmanagers",level:2},{value:"Bereitstellung der Entwicklungsumgebung mit dem ruyi-Paketmanager:",id:"bereitstellung-der-entwicklungsumgebung-mit-dem-ruyi-paketmanager",level:2},{value:"Cross-Kompilierung von Coremark",id:"cross-kompilierung-von-coremark",level:2},{value:"Ausf\xfchrungsvalidierung",id:"ausf\xfchrungsvalidierung",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"verwendung-der-ruyi-compilerumgebung-am-beispiel-von-licheepi-4a",children:"Verwendung der Ruyi-Compilerumgebung (am Beispiel von Licheepi 4A)"}),"\n",(0,i.jsx)(n.p,{children:"Anhand des Open-Source-Benchmarkprogramms Coremark wird der Prozess vom Installieren \xfcber den ruyi-Paketmanager bis hin zum Aufbau einer RISC-V-Compiler- und Simulationsumgebung demonstriert. Dabei wird der Quellcode von Coremark lokal kompiliert und auf dem Licheepi 4A-Entwicklungsboard ausgef\xfchrt."}),"\n",(0,i.jsx)(n.h2,{id:"umgebungsbeschreibung",children:"Umgebungsbeschreibung"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hardware-Umgebung: Licheepi 4A Entwicklungsboard (th1520)"}),"\n",(0,i.jsx)(n.li,{children:"Software-Umgebung: Debian/openEuler f\xfcr RISC-V"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation-des-ruyi-paketmanagers",children:"Installation des ruyi-Paketmanagers"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"[Optional] Entfernen Sie den derzeit installierten ruyi-Paketmanager sowie alle zugeh\xf6rigen Daten."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ruyi self uninstall --purge\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Laden Sie das ",(0,i.jsx)(n.code,{children:"ruyi"}),"-Tool herunter, gew\xe4hren Sie ihm Ausf\xfchrungsrechte und f\xfcgen Sie es der Umgebungsvariable hinzu: Laden Sie das neueste ",(0,i.jsx)(n.code,{children:"ruyi"}),"-Tool von ",(0,i.jsx)(n.a,{href:"https://github.com/RuyiSDK/ruyi/releases/",children:"ruyi GitHub Releases"})," oder dem ",(0,i.jsx)(n.a,{href:"https://mirror.iscas.ac.cn/RuyiSDK/ruyi/releases/",children:"ISCAS-Mirrorsource"})," herunter."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Laden Sie die riscv64-Version des ruyi-Paketmanagers herunter, legen Sie sie im PATH ab und gew\xe4hren Sie ihr Ausf\xfchrungsrechte\nwget https://github.com/ruyisdk/ruyi/releases/download/0.25.0/ruyi-0.25.0.riscv64\nsudo cp ruyi-0.25.0.riscv64 /usr/local/bin/ruyi\nsudo chmod +x ruyi\ncd\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie, ob der ruyi-Paketmanager verwendet werden kann."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ruyi --version\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Aktualisieren Sie den Index der Softwarequellen."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ruyi update\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bereitstellung-der-entwicklungsumgebung-mit-dem-ruyi-paketmanager",children:"Bereitstellung der Entwicklungsumgebung mit dem ruyi-Paketmanager:"}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie die Paketindexinformationen des Softwarerepositories."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ruyi list\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsxs)(n.li,{children:["Installieren Sie gnu: ruyi install ",(0,i.jsx)(n.code,{children:"<package-name>"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Installieren der f\xfcr Licheepi 4A geeigneten Compiler-Toolchain gnu-plct-xthead \nruyi install gnu-plct-xthead \n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie die vordefinierten Compilerumgebungen."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ruyi list profiles\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsxs)(n.li,{children:["Erstellen Sie die ruyi-Virtual Environment venv-sipeed mit dem angegebenen Toolchain- und Emulator-Konfigurations.","\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Beachten Sie, dass beim Erstellen der virtuellen Umgebung die korrekte Compiler-Version und Sysroot-Art ausgew\xe4hlt werden muss.\nWenn keine Versionsnummer angegeben wird, wird standardm\xe4\xdfig die neueste Version aus den Softwarequellen verwendet, nicht die lokal installierte Version."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ruyi venv -h\n\n# Erstellen der virtuellen Umgebung venv-sipeed\nruyi venv -t gnu-plct-xthead sipeed-lpi4a venv-sipeed \n\n# \xdcberpr\xfcfen der Tools in der Compilerumgebung\nls venv-sipeed/bin/ \n\n# Aktivieren der virtuellen Umgebung (die virtuelle Umgebung kann als ein Container verstanden werden, der eine Isolierung der Laufzeitumgebung erm\xf6glicht. Nach der Aktivierung wird in der venv-sipeed-Umgebung die Toolchain der Version gnu-plct-xthead genutzt. Alternativ kann auch eine Umgebungsvariable f\xfcr /home/sipeed/.local/share/ruyi/binaries/riscv64/gnu-plct-xthead-2.8.0-ruyi.20240222/bin konfiguriert werden, um gcc direkt zu verwenden.)\n. venv-sipeed/bin/ruyi-activate \n\n# \xdcberpr\xfcfen, ob gcc in der aktuellen virtuellen Umgebung verf\xfcgbar ist\n\xabRuyi venv-sipeed\xbb sipeed@lpi4a1590:~$ riscv64-plctxthead-linux-gnu-gcc --version \n"})}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsx)(n.li,{children:"Laden Sie den Quellcode von Coremark herunter und extrahieren Sie ihn, um ein Kompilierungsziel zu erhalten."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir coremark && cd coremark\nruyi extract coremark\nls -al\n"})}),"\n",(0,i.jsx)(n.h2,{id:"cross-kompilierung-von-coremark",children:"Cross-Kompilierung von Coremark"}),"\n",(0,i.jsxs)(n.ol,{start:"10",children:["\n",(0,i.jsx)(n.li,{children:"Stellen Sie die Kompilierungskonfiguration im Coremark-Quellcode ein (siehe README-Dokument des Coremark-Repositories)."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sed -i 's/\\bgcc\\b/riscv64-plctxthead-linux-gnu-gcc/g' linux64/core_portme.mak\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"11",children:["\n",(0,i.jsx)(n.li,{children:"F\xfchren Sie die Cross-Kompilierung und den Aufbau durch, um das ausf\xfchrbare Programm coremark.exe zu erhalten."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"make PORT_DIR=linux64 link\nls -al    # das neue ausf\xfchrbare Programm coremark.exe\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"12",children:["\n",(0,i.jsx)(n.li,{children:"\xdcberpr\xfcfen Sie die Eigenschaften des riscv64-executables."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"file coremark.exe\n# Die R\xfcckgabe der Befehle zeigt architekturspezifische Informationen der Datei an\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ausf\xfchrungsvalidierung",children:"Ausf\xfchrungsvalidierung"}),"\n",(0,i.jsxs)(n.ol,{start:"13",children:["\n",(0,i.jsx)(n.li,{children:"F\xfchren Sie das riscv64 coremark-executable direkt aus."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./coremark.exe\n"})})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>d});var i=r(6540);const s={},a=i.createContext(s);function l(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);