"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[9682],{99493:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>d});var a=s(74848),i=s(28453);const c={sidebar_position:5},l="\u4f7f\u7528 CMake \u548c Meson \u96c6\u6210",r={id:"Package-Manager/cases/case5",title:"\u4f7f\u7528 CMake \u548c Meson \u96c6\u6210",description:"cmake",source:"@site/docs/Package-Manager/cases/case5.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case5",permalink:"/docs/docs/Package-Manager/cases/case5",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"\u4ee5 fastboot \u65b9\u5f0f\u5237\u5199\u5f00\u53d1\u677f\uff08\u4ee5 LicheePi 4A \u4e3a\u4f8b\uff09",permalink:"/docs/docs/Package-Manager/cases/case4"},next:{title:"\u4f7f\u7528 QEMU \u548c LLVM",permalink:"/docs/docs/Package-Manager/cases/case6"}},t={},d=[{value:"cmake",id:"cmake",level:2},{value:"meson",id:"meson",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"\u4f7f\u7528-cmake-\u548c-meson-\u96c6\u6210",children:"\u4f7f\u7528 CMake \u548c Meson \u96c6\u6210"}),"\n",(0,a.jsx)(n.h2,{id:"cmake",children:"cmake"}),"\n",(0,a.jsx)(n.p,{children:"\u9996\u5148\u786e\u4fdd\u4f60\u6709\u5b89\u88c5 cmake \u548c ninja\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# Ubuntu/Debian\n$ sudo apt-get install cmake ninja-build\n# Fedora\n$ sudo dnf install cmake ninja-build\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4e0b\u8f7d zlib\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ wget https://github.com/zlib-ng/zlib-ng/archive/refs/tags/2.2.2.tar.gz\n$ mkdir zlib-ng\n$ cd zlib-ng\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5b89\u88c5\u5e76\u6fc0\u6d3b gnu-plct \u5de5\u5177\u94fe\u7f16\u8bd1\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ ruyi install gnu-plct\n$ ruyi venv -t gnu-plct generic venv\n$ . venv/bin/ruyi-activate\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u89e3\u538b zlib\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ tar -xf ./zlib-ng-2.2.2.tar.gz\n$ cd zlib-ng-2.2.2\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528 cmake \u6784\u5efa zlib\uff1a\n\u4e3a\u4ec0\u4e48\u8981\u7528\u8fd9\u6837\u7684\u53c2\u6570\u53ef\u4ee5\u53c2\u8003 venv \u91cc\u7684 toolchain.riscv64-plct-linux-gnu.cmake \u6587\u4ef6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ cmake . -G Ninja -DCMAKE_C_COMPILER=riscv64-plct-linux-gnu-gcc -DZLIB_COMPAT=ON -DWITH_GTEST=OFF\n$ ninja\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u68c0\u67e5\u7f16\u8bd1\u51fa\u7684\u6587\u4ef6\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ file libz.so.1.3.1.zlib-ng \nlibz.so.1.3.1.zlib-ng: ELF 64-bit LSB shared object, UCB RISC-V, RVC, double-float ABI, version 1 (SYSV), dynamically linked, BuildID[sha1]=bb6bdf59fa0fd746b3a6d3586ff1cfabcbe4a6e9, with debug_info, not stripped\n"})}),"\n",(0,a.jsx)(n.h2,{id:"meson",children:"meson"}),"\n",(0,a.jsx)(n.p,{children:"\u5b89\u88c5 meson\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# Ubuntu/Debian\n$ sudo apt-get install meson\n# Fedora\n$ sudo dnf install meson\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u548c\u4e0a\u6587\u4e00\u6837\uff0c\u9996\u5148\u5b89\u88c5\u5e76\u6fc0\u6d3b gnu-plct \u5de5\u5177\u94fe\u7f16\u8bd1\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ ruyi install gnu-plct\n$ ruyi venv -t gnu-plct generic venv\n$ . venv/bin/ruyi-activate\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4e0b\u8f7d taisei\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ git clone --recurse-submodules --depth=1 https://github.com/taisei-project/taisei\n$ cd taisei\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u6839\u636e venv/meson-cross.ini\uff0cmeson \u7684\u4ea4\u53c9\u7f16\u8bd1\u914d\u7f6e\u53ca\u7f16\u8bd1\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ meson setup --cross-file /home/cyan/zlib-ng/venv/meson-cross.ini build/\n$ meson compile -C build/\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u68c0\u67e5\u7f16\u8bd1\u51fa\u7684\u6587\u4ef6\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"$ file build/src/taisei\ntaisei: ELF 64-bit LSB executable, UCB RISC-V, RVC, double-float ABI, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux-riscv64-lp64d.so.1, BuildID[sha1]=8fb80413e4a41ffeb75450b80a4b068c504b152e, for GNU/Linux 4.15.0, with debug_info, not stripped\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>r});var a=s(96540);const i={},c=a.createContext(i);function l(e){const n=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(c.Provider,{value:n},e.children)}}}]);